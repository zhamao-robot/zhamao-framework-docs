(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{763:function(t,s,a){"use strict";a.r(s);var e=a(108),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"消息处理工具类-messageutil"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#消息处理工具类-messageutil"}},[t._v("#")]),t._v(" 消息处理工具类 - MessageUtil")]),t._v(" "),a("p",[t._v("类定义："),a("code",[t._v("\\ZM\\Utils\\MessageUtil")])]),t._v(" "),a("blockquote",[a("p",[t._v("2.3.0 版本起可用。")])]),t._v(" "),a("p",[t._v("这里放置一些机器人聊天消息处理的便捷静态方法，例如下载图片等。")]),t._v(" "),a("h2",{attrs:{id:"方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方法"}},[t._v("#")]),t._v(" 方法")]),t._v(" "),a("h3",{attrs:{id:"downloadcqimage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#downloadcqimage"}},[t._v("#")]),t._v(" downloadCQImage()")]),t._v(" "),a("p",[t._v("下载用户消息中所带的所有图片，并返回文件路径。")]),t._v(" "),a("p",[t._v("定义："),a("code",[t._v("downloadCQImage($msg, $path = null)")])]),t._v(" "),a("p",[t._v("参数 "),a("code",[t._v("$msg")]),t._v(" 为带图片的用户消息，例如 "),a("code",[t._v("你好啊！\\n[CQ:image,file=a.jpg,url=https://zhamao.xin/file/hello.jpg]")])]),t._v(" "),a("p",[t._v("参数 "),a("code",[t._v("$path")]),t._v(" 为图片下载的路径，如果不填（默认 null）则指定为 "),a("code",[t._v("zm_data/images/")]),t._v(" 目录，且不存在会自动创建。")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$r")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("MessageUtil")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("downloadCQImage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"你好啊！\\n[CQ:image,file=a.jpg,url=https://zhamao.xin/file/hello.jpg]"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/*\n$r == [\n    "/path-to/zhamao-framework/zm_data/images/a.jpg"\n];\n*/')]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("p",[t._v("如果返回的是空数组 "),a("code",[t._v("[ ]")]),t._v("，则表明消息中没有图片。如果返回的是 "),a("code",[t._v("false")]),t._v("，则表明其中至少一张下载失败或路径有误。")]),t._v(" "),a("h3",{attrs:{id:"containsimage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#containsimage"}},[t._v("#")]),t._v(" containsImage()")]),t._v(" "),a("p",[t._v("检查消息中是否含有图片。")]),t._v(" "),a("p",[t._v("定义："),a("code",[t._v("containsImage($msg)")])]),t._v(" "),a("p",[t._v("返回："),a("code",[t._v("bool")]),t._v("，你懂的，true 就是有，false 就没有。")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("MessageUtil")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("containsImage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"[CQ:image,file=a.jpg,url=http://xxx]"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("MessageUtil")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("containsImage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"[CQ:face,id=140] 咦，这是一条带表情的消息"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// false")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h3",{attrs:{id:"isatme"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#isatme"}},[t._v("#")]),t._v(" isAtMe()")]),t._v(" "),a("p",[t._v("检查消息中是否含有@bot的消息。")]),t._v(" "),a("p",[t._v("定义："),a("code",[t._v("isAtMe($msg, $me_id)")])]),t._v(" "),a("p",[t._v("参数 "),a("code",[t._v("$me_id")]),t._v(" 为Bot的QQ号。")]),t._v(" "),a("p",[t._v("返回："),a("code",[t._v("bool")]),t._v("，true 就是有，false 就没有。")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("MessageUtil")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isAtMe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"[CQ:at,qq=123456]炸毛你好"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"123456"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("MessageUtil")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isAtMe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"[CQ:at,qq=123456789]另一个朋友你好"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"123456"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// false")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h3",{attrs:{id:"getimagecqfromlocal"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getimagecqfromlocal"}},[t._v("#")]),t._v(" getImageCQFromLocal()")]),t._v(" "),a("p",[t._v("通过文件路径获取图片的发送 CQ 码。")]),t._v(" "),a("p",[t._v("定义："),a("code",[t._v("getImageCQFromLocal($file, $type = 0)")])]),t._v(" "),a("p",[t._v("参数 "),a("code",[t._v("$file")]),t._v(" 为图片的绝对路径。")]),t._v(" "),a("p",[t._v("返回：图片的 CQ 码，如 "),a("code",[t._v("[CQ:image,file=xxxxx]")])]),t._v(" "),a("p",[t._v("参数 "),a("code",[t._v("$type")]),t._v("：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("0")]),t._v("：以 base64 的方式发送图片，返回结果如 "),a("code",[t._v("[CQ:image,file=base64://xxxxxx]")])]),t._v(" "),a("li",[a("code",[t._v("1")]),t._v("：以 "),a("code",[t._v("file://")]),t._v(" 本地文件的方式发送图片，返回结果如 "),a("code",[t._v("[CQ:image,file=file:///path-to/images/a.jpg]")])]),t._v(" "),a("li",[a("code",[t._v("2")]),t._v("：返回图片的 http:// CQ 码（默认为 /images/ 路径就是文件对应所在的目录），如 "),a("code",[t._v("[CQ:image,file=http://127.0.0.1:20001/images/a.jpg]")])])]),t._v(" "),a("h3",{attrs:{id:"splitcommand"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#splitcommand"}},[t._v("#")]),t._v(" splitCommand()")]),t._v(" "),a("p",[t._v("切割用户消息为数组形式（"),a("code",[t._v("@CQCommand")]),t._v(" 就是使用此方式切割的）")]),t._v(" "),a("p",[t._v("定义："),a("code",[t._v("splitCommand($msg): array")])]),t._v(" "),a("p",[t._v("返回：数组，切分后的。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("为什么不直接使用 explode 呢")]),t._v(" "),a("p",[t._v("因为 "),a("code",[t._v("explode()")]),t._v(" 只会简单粗暴的切割字符串，假设用户输入的消息中两个词中间有多个空格，则会有空的词出现。例如 "),a("code",[t._v("你好 我是一个长空格")]),t._v("。此函数会将多个空格当作一个空格来对待。")])]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("MessageUtil")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("splitCommand")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"你好 我是傻瓜\\n我是傻瓜二号"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// ["你好","我是傻瓜","我是傻瓜二号"]')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("MessageUtil")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("splitCommand")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"我有   三个空格"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// ["我有","三个空格"]')]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h3",{attrs:{id:"matchcommand"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#matchcommand"}},[t._v("#")]),t._v(" matchCommand()")]),t._v(" "),a("p",[t._v("匹配一条消息到 "),a("code",[t._v("@CQCommand")]),t._v(" 规则的注解事件，返回要执行的类和函数位置。")]),t._v(" "),a("p",[t._v("定义："),a("code",[t._v("matchCommand($msg, $obj)")])]),t._v(" "),a("p",[t._v("参数 "),a("code",[t._v("$msg")]),t._v(" 为消息内容。")]),t._v(" "),a("p",[t._v("参数 "),a("code",[t._v("$obj")]),t._v(" 为事件的对象，可使用 "),a("code",[t._v("ctx()->getData()")]),t._v(" 获取原先的事件体（仅限 OneBot 消息类型事件中使用）")]),t._v(" "),a("p",[t._v("返回："),a("code",[t._v("\\ZM\\Entity\\MatchObject")]),t._v(" 对象，含有匹配成功与否，匹配到的注解对象，匹配到的分割词等，见 []")]),t._v(" "),a("h3",{attrs:{id:"addshortcommand"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#addshortcommand"}},[t._v("#")]),t._v(" addShortCommand()")]),t._v(" "),a("p",[t._v("快速添加一条静态消息回复命令。")]),t._v(" "),a("p",[t._v("定义："),a("code",[t._v("addShortCommand($command, string $reply)")])]),t._v(" "),a("p",[t._v("参数 "),a("code",[t._v("$command")]),t._v(" 为问的内容，如 "),a("code",[t._v("炸毛不聪明")]),t._v("。")]),t._v(" "),a("p",[t._v("参数 "),a("code",[t._v("$reply")]),t._v(" 为回复的内容，如 "),a("code",[t._v("其实还是很聪明的！")]),t._v("。")]),t._v(" "),a("p",[t._v("这个命令推荐在 "),a("code",[t._v("@OnStart")]),t._v(" 注解下使用，可以用这个来做一个动态的词库，从文件加载后使用。")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @OnStart()\n */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("onStart")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("MessageUtil")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addShortCommand")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"炸毛不聪明"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"其实还是很聪明的！"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("chat-box",{attrs:{"my-chats":[{type:0,content:"炸毛不聪明"},{type:1,content:"其实还是很聪明的！"}]}}),t._v(" "),a("h3",{attrs:{id:"strtoarray"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#strtoarray"}},[t._v("#")]),t._v(" strToArray()")]),t._v(" "),a("p",[t._v("将 "),a("code",[t._v("string")]),t._v(" 类型的消息文本转换为 "),a("code",[t._v("array")]),t._v(" 格式。")]),t._v(" "),a("p",[t._v("定义："),a("code",[t._v("strToArray($msg, bool $ignore_space = true, bool $trim_text = false)")])]),t._v(" "),a("p",[t._v("参数 "),a("code",[t._v("$msg")]),t._v(" 为带 OB/CQ 码的字符串消息，如 "),a("code",[t._v("你好啊，[CQ:at,qq=123]")]),t._v("。")]),t._v(" "),a("p",[t._v("参数 "),a("code",[t._v("$ignore_space")]),t._v(" 在 "),a("code",[t._v("false")]),t._v(" 时，转换的数组内会包含空 "),a("code",[t._v("text")]),t._v(" 段。")]),t._v(" "),a("p",[t._v("参数 "),a("code",[t._v("$trim_text")]),t._v(" 为 "),a("code",[t._v("true")]),t._v(" 时，会自动去除 "),a("code",[t._v("text")]),t._v(" 段消息头尾的换行符和空格。")]),t._v(" "),a("p",[t._v("这个命令转换的数组格式符合 OneBot 11/12 标准，但细节上可能会与不同 OneBot 实现有所差异。")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$str")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"你好啊，[CQ:at,qq=123]"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$arr")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name class-name-fully-qualified static-context"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("ZM"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Utils"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("MessageUtil")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("strToArray")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$str")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("转换结果参考如下：")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"text"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"你好啊，"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"at"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"qq"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"123"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br")])]),a("h3",{attrs:{id:"arraytostr"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#arraytostr"}},[t._v("#")]),t._v(" arrayToStr()")]),t._v(" "),a("p",[t._v("将 "),a("code",[t._v("array")]),t._v(" 格式的消息内容转换为字符串 + CQ 码的形式。")]),t._v(" "),a("p",[t._v("定义："),a("code",[t._v("arrayToStr(array $array)")])]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 我们使用上边的 $arr 作为传入值。")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$new_str")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name class-name-fully-qualified static-context"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("ZM"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Utils"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("MessageUtil")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("arrayToStr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$arr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// 结果："你好啊，[CQ:at,qq=123]"')]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])])],1)}),[],!1,null,null,null);s.default=n.exports}}]);