(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{803:function(s,e,t){"use strict";t.r(e);var a=t(108),n=Object(a.a)({},(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"cqbefore-过滤不了-waitmessage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cqbefore-过滤不了-waitmessage"}},[s._v("#")]),s._v(" CQBefore 过滤不了 waitMessage")]),s._v(" "),t("p",[s._v("因为 "),t("code",[s._v("waitMessage()")]),s._v(" 功能是要等待接收下一个消息事件的，而消息事件又会被 CQBefore 走一遍。但是这里就会有一个问题，那 "),t("code",[s._v("waitMessage()")]),s._v(" 的消息会不会走 CQBefore 呢？（显然不会啊！这个问题的题目就是这个！）")]),s._v(" "),t("p",[s._v("框架在 2.4.2 版本之前是无法过滤 waitMessage() 的（之前在 2.1 版本左右的几个版本是可以的，但这里不讨论历史版本），从 2.4.2 版本起支持过滤 "),t("code",[s._v("waitMessage")]),s._v("，但是需要设置一下 "),t("code",[s._v("@CQBefore")]),s._v(" 的级别。")]),s._v(" "),t("div",{staticClass:"language-php line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('/**\n * @CQBefore("message",level=201)\n */')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function-definition function"}},[s._v("filter1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('/**\n * @CQBefore("message")\n */')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function-definition function"}},[s._v("filter2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[s._v("如果 "),t("code",[s._v("level >= 200")]),s._v("，那么此注解事件则会过滤 "),t("code",[s._v("waitMessage()")]),s._v("，如果 "),t("code",[s._v("level < 200")]),s._v("，则不会。（"),t("code",[s._v("@CQBefore")]),s._v(" 的默认 level 为 20，所以默认情况下是不会过滤 waitMessage 的）")])])}),[],!1,null,null,null);e.default=n.exports}}]);