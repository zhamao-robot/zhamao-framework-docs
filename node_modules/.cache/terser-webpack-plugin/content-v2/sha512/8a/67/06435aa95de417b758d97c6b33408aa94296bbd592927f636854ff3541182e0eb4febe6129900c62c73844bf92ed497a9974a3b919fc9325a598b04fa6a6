{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{201:function(s,t,a){s.exports=a.p+\"assets/img/diagram.059cd78b.png\"},213:function(s,t,a){\"use strict\";a.r(t);var n=a(27),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":s.$parent.slotKey}},[n(\"h1\",{attrs:{id:\"http-服务器\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#http-服务器\"}},[s._v(\"#\")]),s._v(\" HTTP 服务器\")]),s._v(\" \"),n(\"p\",[s._v(\"最先开始的时候，我们说了 炸毛框架 不仅仅是聊天机器人的框架，还是一个完整的 HTTP + WebSocket 服务器，你不仅可以开发机器人功能，框架还可用于开发任何 Web 应用程序，构建高性能的 Web 系统、API、中间件、基础服务等。\")]),s._v(\" \"),n(\"div\",{staticClass:\"custom-block tip\"},[n(\"p\",{staticClass:\"custom-block-title\"},[s._v(\"提示\")]),s._v(\" \"),n(\"p\",[s._v(\"炸毛框架的注解和 HTTP 服务器控制器响应方式高度类似 \"),n(\"strong\",[s._v(\"Swoft\")]),s._v(\" 框架，如果你熟悉 Swoft 框架的话，这里学习起来将会非常容易。\")])]),s._v(\" \"),n(\"h2\",{attrs:{id:\"功能特色\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#功能特色\"}},[s._v(\"#\")]),s._v(\" 功能特色\")]),s._v(\" \"),n(\"ul\",[n(\"li\",[s._v(\"基于 \"),n(\"code\",[s._v(\"@RequestMapping\")]),s._v(\" 和 \"),n(\"code\",[s._v(\"@Controller\")]),s._v(\" 的路由注解\")]),s._v(\" \"),n(\"li\",[s._v(\"提供简单的参数支持\")]),s._v(\" \"),n(\"li\",[s._v(\"响应迅速，无任何臃肿的框架代码，无过多封装，直接操作原生的 Swoole 对象\")])]),s._v(\" \"),n(\"p\",[s._v(\"在一般情况下，我们启动了炸毛框架后，HTTP 服务器就自动启动了，访问框架监听的地址和端口，就可以访问 HTTP 服务。\")]),s._v(\" \"),n(\"h2\",{attrs:{id:\"控制器和路由\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#控制器和路由\"}},[s._v(\"#\")]),s._v(\" 控制器和路由\")]),s._v(\" \"),n(\"p\",[s._v(\"控制器主要通过 \"),n(\"code\",[s._v(\"@Controller\")]),s._v(\" 注解实现。此注解仅适用于对类进行修饰。\")]),s._v(\" \"),n(\"ul\",[n(\"li\",[n(\"p\",[s._v(\"名称：\"),n(\"code\",[s._v(\"@Controller\")])])]),s._v(\" \"),n(\"li\",[n(\"p\",[s._v(\"命名空间：\"),n(\"code\",[s._v(\"ZM\\\\Annotation\\\\Http\\\\Controller\")])])]),s._v(\" \"),n(\"li\",[n(\"p\",[s._v(\"参数：\"),n(\"code\",[s._v(\"*prefix\")])])]),s._v(\" \"),n(\"li\",[n(\"p\",[s._v(\"作用：声明此类下所有路由的根路由地址。\")])]),s._v(\" \"),n(\"li\",[n(\"p\",[s._v(\"名称：\"),n(\"code\",[s._v(\"@RequestMapping\")])])]),s._v(\" \"),n(\"li\",[n(\"p\",[s._v(\"命名空间：\"),n(\"code\",[s._v(\"ZM\\\\Annotation\\\\Http\\\\RequestMapping\")])])]),s._v(\" \"),n(\"li\",[n(\"p\",[s._v(\"参数：\"),n(\"code\",[s._v(\"*route\")]),s._v(\"，\"),n(\"code\",[s._v(\"name\")]),s._v(\"，\"),n(\"code\",[s._v(\"method\")])])]),s._v(\" \"),n(\"li\",[n(\"p\",[s._v(\"作用：路由地址\")])])]),s._v(\" \"),n(\"h3\",{attrs:{id:\"路由规则\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#路由规则\"}},[s._v(\"#\")]),s._v(\" 路由规则\")]),s._v(\" \"),n(\"p\",[s._v(\"通常情况，一个完整的路由 \"),n(\"code\",[s._v(\"path\")]),s._v(\" 等于 \"),n(\"code\",[s._v(\"@Controller\")]),s._v(\" 的 \"),n(\"code\",[s._v(\"prefix\")]),s._v(\" + \"),n(\"code\",[s._v(\"@RequestMapping\")]),s._v(\" 的 \"),n(\"code\",[s._v(\"route\")]),s._v(\"。例如：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-php line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-php\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token php language-php\"}},[n(\"span\",{pre:!0,attrs:{class:\"token delimiter important\"}},[s._v(\"<?php\")]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"namespace\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token package\"}},[s._v(\"Module\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Example\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"use\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token package\"}},[s._v(\"ZM\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"ModBase\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"use\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token package\"}},[s._v(\"ZM\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Annotation\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Http\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Controller\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"use\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token package\"}},[s._v(\"ZM\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Annotation\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Http\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"RequestMapping\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v('/**\\n * @Controller(\"/api\")\\n */')]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"class\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"Test\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"extends\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"ModBase\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v('/**\\n     * @RequestMapping(\"/index\")\\n     */')]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"public\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"function\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"index\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v('//context()->getResponse()->end(\"This is API index page\");')]),s._v(\"\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$this\")]),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),n(\"span\",{pre:!0,attrs:{class:\"token property\"}},[s._v(\"response\")]),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"end\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[s._v('\"This is API index page\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n  \\t\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v('/**\\n  \\t * @RequestMapping(\"/ping\")\\n  \\t */')]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"public\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"function\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"ping\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$this\")]),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"-\")]),s._v(\"response\"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"end\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[s._v('\"pong\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\")])])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),n(\"br\")])]),n(\"p\",[s._v(\"以上编写后，从浏览器访问 \"),n(\"code\",[s._v(\"http://127.0.0.1:20001/api/index\")]),s._v(\" 时就会访问到 \"),n(\"code\",[s._v(\"This is API index page\")]),s._v(\"，访问 \"),n(\"code\",[s._v(\"/api/ping\")]),s._v(\" 时就会返回 \"),n(\"code\",[s._v(\"pong\")]),s._v(\"。\")]),s._v(\" \"),n(\"div\",{staticClass:\"custom-block tip\"},[n(\"p\",{staticClass:\"custom-block-title\"},[s._v(\"提示\")]),s._v(\" \"),n(\"p\",[s._v(\"当 \"),n(\"code\",[s._v(\"@Controller\")]),s._v(\" 为 \"),n(\"code\",[s._v(\"/\")]),s._v(\" 的时候，效果和不写是一样的，\"),n(\"code\",[s._v(\"@RequestMapping\")]),s._v(\" 为 \"),n(\"code\",[s._v(\"/\")]),s._v(\" 或 \"),n(\"code\",[s._v(\"/index/inside\")]),s._v(\" 等多级路由也是可以的。\")])]),s._v(\" \"),n(\"h2\",{attrs:{id:\"绑定参数\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#绑定参数\"}},[s._v(\"#\")]),s._v(\" 绑定参数\")]),s._v(\" \"),n(\"p\",[s._v(\"在 \"),n(\"code\",[s._v(\"@RequestMapping\")]),s._v(\" 中，不仅可以写静态的路由地址，也可以写绑定的参数。例如：\"),n(\"code\",[s._v('@RequestMapping(route=\"/index/{name}\")')]),s._v(\"，则访问 \"),n(\"code\",[s._v(\"/index/xxx\")]),s._v(\" 的时候，你在函数方法内可以这样获取此参数：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-php line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-php\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"public\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"function\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"index\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$arg\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$this\")]),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),n(\"span\",{pre:!0,attrs:{class:\"token property\"}},[s._v(\"response\")]),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"end\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[s._v(\"\\\"Your param 'name' is \\\"\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),n(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$arg\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),n(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[s._v('\"name\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\")])]),n(\"h2\",{attrs:{id:\"设置路由请求方式\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#设置路由请求方式\"}},[s._v(\"#\")]),s._v(\" 设置路由请求方式\")]),s._v(\" \"),n(\"p\",[s._v(\"如果想要设置允许请求控制器的 HTTP 请求方式，可以使用方法在控制器中的 \"),n(\"code\",[s._v(\"@RequestMapping\")]),s._v(\" 注解配置 \"),n(\"code\",[s._v(\"method\")]),s._v(\" 参数，可以是 \"),n(\"code\",[s._v(\"GET\")]),s._v(\"，\"),n(\"code\",[s._v(\"POST\")]),s._v(\"，\"),n(\"code\",[s._v(\"PUT\")]),s._v(\", \"),n(\"code\",[s._v(\"PATCH\")]),s._v(\"，\"),n(\"code\",[s._v(\"DELETE\")]),s._v(\"，\"),n(\"code\",[s._v(\"OPTIONS\")]),s._v(\"，\"),n(\"code\",[s._v(\"HEAD\")]),s._v(\" 中的一个或多个。\")]),s._v(\" \"),n(\"ul\",[n(\"li\",[s._v(\"限定 HTTP 方法：\"),n(\"code\",[s._v('@RequestMapping(method=\"GET\")')]),s._v(\"，\"),n(\"code\",[s._v('@RequestMapping(method={\"GET\",\"POST\"})')])])]),s._v(\" \"),n(\"h2\",{attrs:{id:\"事件可用的基类变量\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#事件可用的基类变量\"}},[s._v(\"#\")]),s._v(\" 事件可用的基类变量\")]),s._v(\" \"),n(\"ul\",[n(\"li\",[n(\"code\",[s._v(\"$this->request\")]),s._v(\"：\"),n(\"code\",[s._v(\"swoole_http_request\")]),s._v(\" 对象，可查阅 \"),n(\"a\",{attrs:{href:\"https://wiki.swoole.com/#/http_server?id=httprequest\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"Swoole 文档\"),n(\"OutboundLink\")],1)]),s._v(\" \"),n(\"li\",[n(\"code\",[s._v(\"$this->response\")]),s._v(\"：\"),n(\"code\",[s._v(\"swoole_http_response\")]),s._v(\" 对象，可查阅 \"),n(\"a\",{attrs:{href:\"https://wiki.swoole.com/#/http_server?id=httpresponse\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"Swoole 文档\"),n(\"OutboundLink\")],1)])]),s._v(\" \"),n(\"div\",{staticClass:\"custom-block tip\"},[n(\"p\",{staticClass:\"custom-block-title\"},[s._v(\"提示\")]),s._v(\" \"),n(\"p\",[s._v(\"对于 \"),n(\"code\",[s._v(\"Request\")]),s._v(\" HTTP 请求事件，在函数内还可以使用 \"),n(\"code\",[s._v(\"context()->getRequest()\")]),s._v(\" 和 \"),n(\"code\",[s._v(\"context()->getResponse()\")]),s._v(\" 来获取上述对象。\")])]),s._v(\" \"),n(\"h2\",{attrs:{id:\"中间件\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#中间件\"}},[s._v(\"#\")]),s._v(\" 中间件\")]),s._v(\" \"),n(\"p\",[s._v(\"对于 \"),n(\"code\",[s._v(\"@RequestMapping\")]),s._v(\" 方法，还支持中间件，完成 Session 会话、认证等功能。中间件是用于控制 \"),n(\"code\",[s._v(\"请求到达\")]),s._v(\" 和 \"),n(\"code\",[s._v(\"响应请求\")]),s._v(\" 的整个流程的。从一定意义上来说相当于切面编程（AOP）。目前该中间件仅支持 \"),n(\"code\",[s._v(\"@RequestMapping\")]),s._v(\" 绑定的路由函数。\")]),s._v(\" \"),n(\"h3\",{attrs:{id:\"定义中间件\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#定义中间件\"}},[s._v(\"#\")]),s._v(\" 定义中间件\")]),s._v(\" \"),n(\"p\",[s._v(\"只需要实现 \"),n(\"code\",[s._v(\"\\\\ZM\\\\Http\\\\MiddlewareInterface\")]),s._v(\" 接口的 \"),n(\"code\",[s._v(\"getName()\")]),s._v(\" 方法，返回一个合法的名称即可。例如下方就是一个可以在终端打印路由函数运行的总时间的中间件：\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-php line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-php\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token php language-php\"}},[n(\"span\",{pre:!0,attrs:{class:\"token delimiter important\"}},[s._v(\"<?php\")]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"namespace\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token package\"}},[s._v(\"Module\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Middleware\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"use\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token package\"}},[s._v(\"Framework\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Console\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"use\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token package\"}},[s._v(\"ZM\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Annotation\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Http\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"After\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"use\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token package\"}},[s._v(\"ZM\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Annotation\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Http\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Before\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"use\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token package\"}},[s._v(\"ZM\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Annotation\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Http\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"MiddlewareClass\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"use\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token package\"}},[s._v(\"ZM\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Http\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"MiddlewareInterface\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"/**\\n * Class AuthMiddleware\\n * 示例中间件：用于统计路由函数运行时间用的\\n * @package Module\\\\Middleware\\n * @MiddlewareClass()\\n */\")]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"class\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"TimerMiddleware\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"implements\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"MiddlewareInterface\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"private\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$starttime\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"/**\\n     * @Before()\\n     * @return bool\\n     */\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"public\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"function\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"onBefore\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$this\")]),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),n(\"span\",{pre:!0,attrs:{class:\"token property\"}},[s._v(\"starttime\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"microtime\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token boolean constant\"}},[s._v(\"true\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"return\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token boolean constant\"}},[s._v(\"true\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"/**\\n     * @After()\\n     */\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"public\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"function\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"onAfter\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        Console\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"info\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[s._v('\"Using \"')]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"round\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"microtime\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token boolean constant\"}},[s._v(\"true\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"-\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$this\")]),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),n(\"span\",{pre:!0,attrs:{class:\"token property\"}},[s._v(\"starttime\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"*\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1000\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"2\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[s._v('\" ms.\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"public\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"function\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"getName\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"return\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[s._v('\"timer\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\")])])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"25\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"26\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"27\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"28\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"29\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"30\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"31\")]),n(\"br\")])]),n(\"h3\",{attrs:{id:\"通过注解使用\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#通过注解使用\"}},[s._v(\"#\")]),s._v(\" 通过注解使用\")]),s._v(\" \"),n(\"p\",[s._v(\"通过 \"),n(\"code\",[s._v('@Middleware(\"中间件名称\")')]),s._v(\" 来给路由函数进行绑定中间件。\")]),s._v(\" \"),n(\"p\",[n(\"code\",[s._v(\"@Middleware\")]),s._v(\" 的所在命名空间为：\"),n(\"code\",[s._v(\"\\\\ZM\\\\Annotation\\\\Http\\\\Middleware\")]),s._v(\"。\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-php line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-php\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v('/**\\n * @RequestMapping(\"/test/ping\")\\n * @Middleware(\"timer\")\\n */')]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"public\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"function\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"pong\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n  Co\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sleep\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n  \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"return\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[s._v('\"pong\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),n(\"br\")])]),n(\"h3\",{attrs:{id:\"异常处理\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#异常处理\"}},[s._v(\"#\")]),s._v(\" 异常处理\")]),s._v(\" \"),n(\"p\",[s._v(\"通常情况下，如果用户定义的函数内抛出了异常（包括 \"),n(\"code\",[s._v(\"message\")]),s._v(\" 等事件），会返回到框架基层去返回默认定义的内容。如果想自己捕获可以使用 \"),n(\"code\",[s._v(\"try/catch\")]),s._v(\" ，但不方便复用，多处使用的话就需要重复写代码。这里可以使用中间件的异常处理方便地捕获错误。这个函数写到中间件类里即可\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-php line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-php\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"/**\\n * @HandleException(\\\\Exception::class)\\n * @param Exception|null $e\\n */\")]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"public\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"function\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"onThrowing\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"?\")]),s._v(\"Exception \"),n(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$e\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"context\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"getResponse\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"-\")]),n(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),n(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"endWithStatus\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),n(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"500\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[s._v('\"Error on this.\"')]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),n(\"br\")])]),n(\"p\",[s._v(\"这里的 \"),n(\"code\",[s._v(\"@HandleException\")]),s._v(\" 中的参数为要捕获的类名，注意这里面的类名的命名空间需要写全称，不能上面 use 再使用，否则会无法找到异常类。\")]),s._v(\" \"),n(\"p\",[n(\"code\",[s._v(\"context()\")]),s._v(\" 为获取当前协程空间绑定的 \"),n(\"code\",[s._v(\"request\")]),s._v(\" 和 \"),n(\"code\",[s._v(\"response\")]),s._v(\" 对象。\")]),s._v(\" \"),n(\"h3\",{attrs:{id:\"处理流程图\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#处理流程图\"}},[s._v(\"#\")]),s._v(\" 处理流程图\")]),s._v(\" \"),n(\"p\",[n(\"img\",{attrs:{src:a(201),alt:\"Untitled Diagram\"}})]),s._v(\" \"),n(\"h2\",{attrs:{id:\"http-客户端\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#http-客户端\"}},[s._v(\"#\")]),s._v(\" HTTP 客户端\")]),s._v(\" \"),n(\"p\",[s._v(\"框架内依赖了 Swoole 官方推荐的 \"),n(\"code\",[s._v(\"Saber\")]),s._v(\"，可直接在任意位置使用。这里是 \"),n(\"a\",{attrs:{href:\"https://github.com/swlib/saber\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"Saber 地址\"),n(\"OutboundLink\")],1),s._v(\"。\")]),s._v(\" \"),n(\"p\",[s._v(\"对于 GET 请求 和 POST 请求，框架内也封装了轻量的函数调用，最好不要在框架内使用 \"),n(\"code\",[s._v(\"file_get_contents\")]),s._v(\" 类和 \"),n(\"code\",[s._v(\"curl_exec\")]),s._v(\" 之类的网络请求函数，可能会使协程阻断，Saber 和框架内的轻量化函数都是协程优化的。\")]),s._v(\" \"),n(\"p\",[s._v(\"框架内的轻量函数见组件中 \"),n(\"RouterLink\",{attrs:{to:\"/guide/component.html#zmrequest-http-客户端\"}},[s._v(\"ZMRequest 组件\")])],1)])}),[],!1,null,null,null);t.default=e.exports}}]);","extractedComments":[]}