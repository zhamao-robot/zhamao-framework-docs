(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{814:function(v,_,e){"use strict";e.r(_);var t=e(108),a=Object(t.a)({},(function(){var v=this,_=v.$createElement,e=v._self._c||_;return e("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[e("h1",{attrs:{id:"更新日志-v1-版本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更新日志-v1-版本"}},[v._v("#")]),v._v(" 更新日志（v1 版本）")]),v._v(" "),e("h2",{attrs:{id:"v1-6-5"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v1-6-5"}},[v._v("#")]),v._v(" v1.6.5")]),v._v(" "),e("blockquote",[e("p",[v._v("更新时间：2020.12.9")])]),v._v(" "),e("ul",[e("li",[v._v("修复：版本号显示")]),v._v(" "),e("li",[v._v("优化：依赖问题，减少对 PHP 扩展的依赖，转变为可选")])]),v._v(" "),e("h2",{attrs:{id:"v1-6-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v1-6-4"}},[v._v("#")]),v._v(" v1.6.4")]),v._v(" "),e("blockquote",[e("p",[v._v("更新时间：2020.12.9")])]),v._v(" "),e("ul",[e("li",[v._v("修复：composer require模式下自动加载的问题")]),v._v(" "),e("li",[v._v("优化：减少不是必需的依赖问题")])]),v._v(" "),e("h2",{attrs:{id:"v1-6-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v1-6-3"}},[v._v("#")]),v._v(" v1.6.3")]),v._v(" "),e("blockquote",[e("p",[v._v("更新时间：2020.11.15")])]),v._v(" "),e("ul",[e("li",[v._v("修复：Response 对象使用 redirect 造成的递归报错")]),v._v(" "),e("li",[v._v("修复："),e("code",[v._v("document_index")]),v._v(" 配置项在 "),e("code",[v._v("/")]),v._v(" 路径下无法使用的 bug")])]),v._v(" "),e("h2",{attrs:{id:"v1-6-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v1-6-2"}},[v._v("#")]),v._v(" v1.6.2")]),v._v(" "),e("blockquote",[e("p",[v._v("更新时间：2020.7.27")])]),v._v(" "),e("ul",[e("li",[v._v("修复：不写配置 "),e("code",[v._v("server_event_handler_class")]),v._v(" 项无法启动的 bug")])]),v._v(" "),e("h2",{attrs:{id:"v1-6-1"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v1-6-1"}},[v._v("#")]),v._v(" v1.6.1")]),v._v(" "),e("blockquote",[e("p",[v._v("更新时间：2020.7.26")])]),v._v(" "),e("ul",[e("li",[v._v("新增："),e("code",[v._v("ZMRequest::downloadFile($url, $dst)")]),v._v(" 方法，可直接将文件下载到本地")])]),v._v(" "),e("h2",{attrs:{id:"v1-6"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v1-6"}},[v._v("#")]),v._v(" v1.6")]),v._v(" "),e("blockquote",[e("p",[v._v("更新时间：2020.7.14")])]),v._v(" "),e("ul",[e("li",[v._v("新增：现在可以对类修饰自定义的注解了")]),v._v(" "),e("li",[v._v("修复：数据库操作 where 对象时产生的歧义")]),v._v(" "),e("li",[v._v("新增：支持自定义任何 Swoole Server 事件的注解绑定，详见文档")]),v._v(" "),e("li",[v._v("修复：多个中间件注解对类只生效最后一个的 bug")])]),v._v(" "),e("p",[v._v("❗ 下面是框架升级需要手动进行的变更：")]),v._v(" "),e("ul",[e("li",[v._v("新版本由于引进了自定义 Swoole Server 事件的机制，对 global.php 全局配置文件有了变动，需要添加以下内容才能正常启动（旧版本升级新版本用户，新用户无需操作）：")])]),v._v(" "),e("div",{staticClass:"language-php line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[v._v("/** 注册 Swoole Server 事件注解的类列表 */")]),v._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[v._v("$config")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("[")]),e("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[v._v("'server_event_handler_class'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("]")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[v._v("=")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("[")]),v._v("\n    "),e("span",{pre:!0,attrs:{class:"token class-name class-name-fully-qualified static-context"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("\\")]),v._v("Framework"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("\\")]),v._v("ServerEventHandler")]),e("span",{pre:!0,attrs:{class:"token operator"}},[v._v("::")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("class")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(",")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[v._v("//默认不可删除，否则会不能使用框架")]),v._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(";")]),v._v("\n")])]),v._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[v._v("1")]),e("br"),e("span",{staticClass:"line-number"},[v._v("2")]),e("br"),e("span",{staticClass:"line-number"},[v._v("3")]),e("br"),e("span",{staticClass:"line-number"},[v._v("4")]),e("br")])]),e("h2",{attrs:{id:"v1-5-8"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v1-5-8"}},[v._v("#")]),v._v(" v1.5.8")]),v._v(" "),e("blockquote",[e("p",[v._v("更新时间：2020.6.26")])]),v._v(" "),e("ul",[e("li",[v._v("新增："),e("code",[v._v("@CQCommand")]),v._v(" 注解的 fullMatch 参数（全量正则表达式匹配）")])]),v._v(" "),e("h2",{attrs:{id:"v1-5-7"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v1-5-7"}},[v._v("#")]),v._v(" v1.5.7")]),v._v(" "),e("blockquote",[e("p",[v._v("更新时间：2020.6.20")])]),v._v(" "),e("ul",[e("li",[v._v("新增：ZM_BREAKPOINT 的短名称：BP")]),v._v(" "),e("li",[v._v("优化：终端连接器自动重连")]),v._v(" "),e("li",[v._v("修复：语法错误时防止循环报错")])]),v._v(" "),e("h2",{attrs:{id:"v1-5-6"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v1-5-6"}},[v._v("#")]),v._v(" v1.5.6")]),v._v(" "),e("blockquote",[e("p",[v._v("更新时间：2020.6.15")])]),v._v(" "),e("ul",[e("li",[v._v("新增："),e("code",[v._v("@CQCommand")]),v._v(" 注解支持 "),e("code",[v._v("message_type")]),v._v("，"),e("code",[v._v("user_id")]),v._v("，"),e("code",[v._v("group_id")]),v._v("，"),e("code",[v._v("discuss_id")]),v._v(" 限定条件")]),v._v(" "),e("li",[v._v("新增：PDO 数据库支持自定义 fetch_mode，可在 "),e("code",[v._v("global.php")]),v._v(" 中的 "),e("code",[v._v('sql_config["sql_default_fetch_mode"]')]),v._v(" 字段设置，也可以调用时 "),e("code",[v._v('DB::rawQuery("语句", [], PDO::FETCH_ASSOC);')]),v._v(" 第三个参数可选")]),v._v(" "),e("li",[v._v("🔴 废弃："),e("code",[v._v("ModBase")]),v._v(" 基类，基类继承机制将在 1.6 版本起完全删除")])]),v._v(" "),e("h2",{attrs:{id:"v1-5-5"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v1-5-5"}},[v._v("#")]),v._v(" v1.5.5")]),v._v(" "),e("blockquote",[e("p",[v._v("更新时间：2020.6.13")])]),v._v(" "),e("ul",[e("li",[v._v("修复："),e("code",[v._v('@SwooleEventAt("close")')]),v._v(" 下不能使用 "),e("code",[v._v("ctx()->getConnection()")]),v._v(" 获取链接对象的 bug")]),v._v(" "),e("li",[v._v("新增：init 命令，可在 "),e("code",[v._v("composer require zhamao/framework")]),v._v(" 后使用 "),e("code",[v._v("vendor/bin/start init")]),v._v(" 初始化项目目录结构和配置文件")]),v._v(" "),e("li",[v._v("更新：默认模块新增机器人断开连接的回调事件")])]),v._v(" "),e("h2",{attrs:{id:"v1-5-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v1-5-4"}},[v._v("#")]),v._v(" v1.5.4")]),v._v(" "),e("blockquote",[e("p",[v._v("更新时间：2020.6.13")])]),v._v(" "),e("ul",[e("li",[v._v("新增："),e("code",[v._v("@CQCommand")]),v._v(" 下支持 alias 参数")]),v._v(" "),e("li",[v._v("更新：将 autoload 变为 composer autoload（需要重新 composer update）")])]),v._v(" "),e("h2",{attrs:{id:"v1-5-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v1-5-3"}},[v._v("#")]),v._v(" v1.5.3")]),v._v(" "),e("blockquote",[e("p",[v._v("更新时间：2020.6.10")])]),v._v(" "),e("ul",[e("li",[v._v("修复：在 Linux 系统下 Terminal 无法正常使用的 bug")])]),v._v(" "),e("h2",{attrs:{id:"v1-5-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v1-5-2"}},[v._v("#")]),v._v(" v1.5.2")]),v._v(" "),e("blockquote",[e("p",[v._v("更新时间：2020.6.8")])]),v._v(" "),e("ul",[e("li",[v._v("新增："),e("code",[v._v("ZM_VERSION")]),v._v(" 常量，对应为当前框架版本")]),v._v(" "),e("li",[v._v("修复：部分链接不带 "),e("code",[v._v("/")]),v._v(" 会导致 ZMRequest 模块报错的 bug")])]),v._v(" "),e("h2",{attrs:{id:"v1-5-1"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v1-5-1"}},[v._v("#")]),v._v(" v1.5.1")]),v._v(" "),e("blockquote",[e("p",[v._v("更新时间：2020.6.5")])]),v._v(" "),e("ul",[e("li",[v._v("新增：ZMRequest::request() 自定义构建 HTTP 请求方法")]),v._v(" "),e("li",[v._v("修复：一个不会导致崩溃的 warning 提示")])]),v._v(" "),e("h2",{attrs:{id:"v1-5"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v1-5"}},[v._v("#")]),v._v(" v1.5")]),v._v(" "),e("blockquote",[e("p",[v._v("更新时间：2020.6.5")])]),v._v(" "),e("ul",[e("li",[v._v("重要变更：支持从 composer 使用框架")]),v._v(" "),e("li",[v._v("新增：数据库 Select 选择器支持 "),e("code",[v._v("count()")]),v._v(" 方法")]),v._v(" "),e("li",[v._v("修复：ZMRequest 中 https 和端口的指定顺序问题")]),v._v(" "),e("li",[v._v("新增：ZMWebSocket 创建 WS 链接的轻量级客户端")]),v._v(" "),e("li",[v._v("修复：数据库异常的捕获更改为 PDOException")])]),v._v(" "),e("h2",{attrs:{id:"v1-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v1-4"}},[v._v("#")]),v._v(" v1.4")]),v._v(" "),e("blockquote",[e("p",[v._v("更新时间：2020.5.23")])]),v._v(" "),e("ul",[e("li",[v._v("新增：自定义 motd")]),v._v(" "),e("li",[v._v("新增：debug_mode 下断点调试功能")]),v._v(" "),e("li",[v._v("新增："),e("code",[v._v("@OnSave")]),v._v(" 注解，储存自动保存的变量时事件激活")]),v._v(" "),e("li",[v._v("新增：Swoole 版本检测")]),v._v(" "),e("li",[v._v("新增：全局函数，以 "),e("code",[v._v("zm_")]),v._v(" 开头的，详情见文档")]),v._v(" "),e("li",[v._v("新增："),e("code",[v._v("@LoadBuffer")]),v._v(" 注解，只加载内存不自动保存的变量")]),v._v(" "),e("li",[v._v("新增：局部静态文件服务")]),v._v(" "),e("li",[v._v("新增：mysqlnd 扩展状态检测")]),v._v(" "),e("li",[v._v("更新：将终端输入更换为多进程")]),v._v(" "),e("li",[v._v("更新：将数据库连接池变更为 Swoole 官方的连接池，需要 Swoole 版本 >= 4.4.13")]),v._v(" "),e("li",[v._v("更新：提升注解绑定的事件函数的执行效率")]),v._v(" "),e("li",[v._v("修复：上下文 "),e("code",[v._v("getConnection()")]),v._v(" 的 fd 无法获取的 bug")]),v._v(" "),e("li",[v._v("修复：MySQL 长链接 gone away 自动重连的问题")]),v._v(" "),e("li",[v._v("修复：MySQL 查询构造器无 WHERE 语句时会造成的 bug")]),v._v(" "),e("li",[v._v("修复：调整各项资源初始化前后顺序")])]),v._v(" "),e("p",[v._v("不可逆修改：你需要重新执行一次 "),e("code",[v._v("composer update")]),v._v(" 或重新拉取一次 Docker Image，因为 composer 依赖发生了变化。")]),v._v(" "),e("h2",{attrs:{id:"v1-3-1"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v1-3-1"}},[v._v("#")]),v._v(" v1.3.1")]),v._v(" "),e("blockquote",[e("p",[v._v("更新时间：2020.5.10")])]),v._v(" "),e("ul",[e("li",[v._v("修复：DataProvider 下 setJsonData 新建文件夹的问题")]),v._v(" "),e("li",[v._v("优化：默认 / 页面显示 "),e("code",[v._v("Hello Zhamao!")]),v._v(" 文字")]),v._v(" "),e("li",[v._v("优化：Exception 和 Fatal error 报错机制的改进")]),v._v(" "),e("li",[v._v("修复：计时器没有上下文环境，发不了 API 的 bug")])]),v._v(" "),e("p",[v._v("❗ 下面是框架升级需要手动进行的变更：")]),v._v(" "),e("ul",[e("li",[v._v("更改 MySQL 客户端为原生 PDO mysqlnd，如果之前使用 Docker 启动，则需使用新的 Dockerfile 构建。如果安装在本机，需安装 php-mysql 扩展。本次更新不影响框架内的 API，不需要更改任何代码。")])]),v._v(" "),e("h2",{attrs:{id:"v1-3-0"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v1-3-0"}},[v._v("#")]),v._v(" v1.3.0")]),v._v(" "),e("blockquote",[e("p",[v._v("更新时间：2020.5.8")])]),v._v(" "),e("ul",[e("li",[v._v("新增：上下文，具体更新都写到了文档里了！")]),v._v(" "),e("li",[v._v("修复：ZMRobot 的 "),e("code",[v._v("setPrefix()")]),v._v(" 的严重错误")]),v._v(" "),e("li",[v._v("优化：优化部分代码")]),v._v(" "),e("li",[v._v("改动：现在你可以和任意事件的注解使用任意中间件啦，而且还支持多中间件")]),v._v(" "),e("li",[v._v("新增：CQHTTP + 酷Q + 炸毛框架 的 Dockerfile")]),v._v(" "),e("li",[v._v("新增注解："),e("code",[v._v("@CQAPISend")]),v._v("，"),e("code",[v._v("@CQAPIResponse")]),v._v("，是 API 调用后触发的事件，具体见文档说明")])]),v._v(" "),e("h2",{attrs:{id:"v1-2-1"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v1-2-1"}},[v._v("#")]),v._v(" v1.2.1")]),v._v(" "),e("blockquote",[e("p",[v._v("更新时间：2020.5.2")])]),v._v(" "),e("ul",[e("li",[v._v("新增：phar 启动模式构建脚本，你可以直接拉取 phar 运行框架了！")]),v._v(" "),e("li",[v._v("优化：优化部分代码")])]),v._v(" "),e("h2",{attrs:{id:"v1-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v1-2"}},[v._v("#")]),v._v(" v1.2")]),v._v(" "),e("blockquote",[e("p",[v._v("更新时间：2020.4.29")])]),v._v(" "),e("ul",[e("li",[v._v("新增：systemd 生成脚本、一键 daemonize 守护进程方式常驻后台")]),v._v(" "),e("li",[v._v("新增：示例模块的注释")]),v._v(" "),e("li",[v._v("重构：Console 模块，现在有准确的控制台输出分级功能了")]),v._v(" "),e("li",[v._v("新增："),e("code",[v._v("@OnTick")]),v._v(" 注解，用于绑定定时器（毫秒级）")]),v._v(" "),e("li",[v._v("新增："),e("code",[v._v("ZMRobot")]),v._v(" 类，比调用 "),e("code",[v._v("CQAPI")]),v._v(" 类发送 API 更方便，同时兼容最新版本的 "),e("code",[v._v("CQHTTP")]),v._v(" 插件")]),v._v(" "),e("li",[v._v("优化：使用键盘中断 "),e("code",[v._v("Ctrl+C")]),v._v("，不会丢失未保存的缓存数据了")]),v._v(" "),e("li",[v._v("优化：完善上下文对象的方法")]),v._v(" "),e("li",[v._v("新增：终端命令："),e("code",[v._v("logtest")]),v._v("，测试输出的 log 类型")])]),v._v(" "),e("p",[v._v("❗️下面是框架模块开发中需要注意的或有不兼容的修改内容：")]),v._v(" "),e("ul",[e("li",[v._v("修改："),e("code",[v._v("global.php")]),v._v(" 中原来的 "),e("code",[v._v("info_level")]),v._v(" 默认数值需要改为 "),e("code",[v._v("2")]),v._v("，保证终端输出和原来一致")])]),v._v(" "),e("h2",{attrs:{id:"v1-1-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v1-1-2"}},[v._v("#")]),v._v(" v1.1.2")]),v._v(" "),e("blockquote",[e("p",[v._v("更新时间：2020.4.26")])]),v._v(" "),e("ul",[e("li",[v._v("新增：静态文件服务器")]),v._v(" "),e("li",[v._v("修复："),e("code",[v._v("/")]),v._v(" 路径的 Mapping 无法正常绑定的 bug")])]),v._v(" "),e("h2",{attrs:{id:"v1-1-1"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v1-1-1"}},[v._v("#")]),v._v(" v1.1.1")]),v._v(" "),e("blockquote",[e("p",[v._v("更新时间：2020.4.26")])]),v._v(" "),e("ul",[e("li",[v._v("新增：中间件对类的修饰")]),v._v(" "),e("li",[v._v("新增：上下文对象对 IDE 的支持")]),v._v(" "),e("li",[v._v("修复：数据库插入查询的愚蠢错误")]),v._v(" "),e("li",[v._v("修复：数据库查询的 "),e("code",[v._v("value()")]),v._v(" 不支持指定参数的 bug")])]),v._v(" "),e("h2",{attrs:{id:"v1-1-0"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v1-1-0"}},[v._v("#")]),v._v(" v1.1.0")]),v._v(" "),e("blockquote",[e("p",[v._v("更新时间：2020.3.29")])]),v._v(" "),e("ul",[e("li",[v._v("新增：中间件 "),e("code",[v._v("@Middleware")]),v._v(" 功能")]),v._v(" "),e("li",[v._v("修复：Websocket 链接关闭后未自动删除连接对象的bug")])]),v._v(" "),e("h2",{attrs:{id:"v1-0-0"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v1-0-0"}},[v._v("#")]),v._v(" v1.0.0")]),v._v(" "),e("blockquote",[e("p",[v._v("更新时间：2020.3.19")])]),v._v(" "),e("p",[v._v("正式版发布。")])])}),[],!1,null,null,null);_.default=a.exports}}]);