(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{762:function(t,s,a){"use strict";a.r(s);var e=a(108),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"多媒体消息-cq码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#多媒体消息-cq码"}},[t._v("#")]),t._v(" 多媒体消息 - CQ码")]),t._v(" "),a("p",[t._v("消息中的多媒体内容使用 CQ 码来表示，形如 "),a("code",[t._v("[CQ:face,id=178]")]),t._v("。其中，"),a("code",[t._v("[CQ:]")]),t._v(" 是固定格式；"),a("code",[t._v("face")]),t._v(" 是「功能名」，除了 "),a("code",[t._v("face")]),t._v(" 还有许多不同的功能名；"),a("code",[t._v("id=178")]),t._v(" 是「参数」，某些功能不需要参数，而另一些需要多个参数，当有多个参数时，参数间使用逗号分隔。")]),t._v(" "),a("h2",{attrs:{id:"格式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#格式"}},[t._v("#")]),t._v(" 格式")]),t._v(" "),a("p",[t._v("一些 CQ 码的例子如下：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[CQ:shake]\n[CQ:face,id=178]\n[CQ:share,title=标题,url=http://baidu.com]\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("更多 CQ 码功能请参考 "),a("a",{attrs:{href:"https://github.com/howmanybots/onebot/blob/master/v11/specs/message/segment.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("消息段类型"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),a("p",[t._v("CQ 码中不应有多余的空格，例如不应该使用 "),a("code",[t._v("[CQ:face, id=178]")]),t._v("。")]),t._v(" "),a("p",[t._v("CQ 码的参数值可以包含空格、换行、除 "),a("code",[t._v("[],&")]),t._v(" 之外的特殊符号等。在解析时，应直接取 "),a("code",[t._v("[CQ:")]),t._v(" 后、第一个 "),a("code",[t._v(",")]),t._v(" 或 "),a("code",[t._v("]")]),t._v(" 前的部分为功能名，第一个 "),a("code",[t._v(",")]),t._v(" 之后到 "),a("code",[t._v("]")]),t._v(" 之间的部分为参数，按 "),a("code",[t._v(",")]),t._v(" 分割后，每个部分第一个 "),a("code",[t._v("=")]),t._v(" 前的内容为参数名，之后的部分为参数值。例如 "),a("code",[t._v("[CQ:share,title=标题中有=等号,url=http://baidu.com]")]),t._v(" 中，功能名为 "),a("code",[t._v("share")]),t._v("，"),a("code",[t._v("title")]),t._v(" 参数值为 "),a("code",[t._v("标题中有=等号")]),t._v("，"),a("code",[t._v("url")]),t._v(" 参数值为 "),a("code",[t._v("http://baidu.com")]),t._v("。")])]),t._v(" "),a("h2",{attrs:{id:"转义"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#转义"}},[t._v("#")]),t._v(" 转义")]),t._v(" "),a("p",[t._v("CQ 码中包含一些特殊字符："),a("code",[t._v("[")]),t._v("、"),a("code",[t._v("]")]),t._v("、"),a("code",[t._v(",")]),t._v(" 等，而 CQ 码又是可能混杂在纯文本内容之中的，因此消息中的纯文本内容需要对特殊字符进行转义，以避免歧义。具体的转义规则如下：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("转义前")]),t._v(" "),a("th",[t._v("转义后")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("&")])]),t._v(" "),a("td",[a("code",[t._v("&amp;")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("[")])]),t._v(" "),a("td",[a("code",[t._v("&#91;")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("]")])]),t._v(" "),a("td",[a("code",[t._v("&#93;")])])])])]),t._v(" "),a("p",[t._v("另一方面，CQ 码内部的参数值也可能出现特殊字符，也是需要转义的。由于 "),a("code",[t._v(",")]),t._v("（半角逗号）在 CQ 码中用于分隔参数，因此除了上面的转义规则，还需要对 "),a("code",[t._v(",")]),t._v(" 进行转义，如下：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("转义前")]),t._v(" "),a("th",[t._v("转义后")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("&")])]),t._v(" "),a("td",[a("code",[t._v("&amp;")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("[")])]),t._v(" "),a("td",[a("code",[t._v("&#91;")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("]")])]),t._v(" "),a("td",[a("code",[t._v("&#93;")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v(",")])]),t._v(" "),a("td",[a("code",[t._v("&#44;")])])])])]),t._v(" "),a("p",[t._v("例如，一个链接分享消息的 CQ 码可能如下：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[CQ:share,title=震惊&#44;小伙睡觉前居然...,url=http://baidu.com/?a=1&amp;b=2]\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h2",{attrs:{id:"封装调用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#封装调用"}},[t._v("#")]),t._v(" 封装调用")]),t._v(" "),a("p",[t._v("框架提供了 CQ 码的封装，你可以在任何位置使用封装好的 CQ 码生成器。")]),t._v(" "),a("p",[t._v("生成器是一个静态类，里面的方法全部是静态调用，命名空间是："),a("code",[t._v("ZM\\API\\CQ")]),t._v("。")]),t._v(" "),a("p",[t._v("例如，给用户发送图片这样写就好啦！只需要将添加图片的地方拼到回复用户的字符串里。如果只发图片，整个字符串里只能有 CQ 码。")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token php language-php"}},[a("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("Module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Example")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("ZM"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("API"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("CQ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("ZM"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Annotation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("CQ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("CQCommand")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name-definition class-name"}},[t._v("Hello")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/**\n     * @CQCommand("发送图片")\n     */')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("msgRecv")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("CQ")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"https://zhamao.xin/file/hello.jpg"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// 相当于返回："[CQ:image,file=https://zhamao.xin/file/hello.jpg]"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])]),a("p",[t._v("效果：")]),t._v(" "),a("chat-box",{attrs:{"my-chats":[{type:0,content:"发送图片"},{type:3,content:"https://zhamao.xin/file/hello.jpg"}]}}),t._v(" "),a("h2",{attrs:{id:"cq-码操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cq-码操作"}},[t._v("#")]),t._v(" CQ 码操作")]),t._v(" "),a("h3",{attrs:{id:"cq-decode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cq-decode"}},[t._v("#")]),t._v(" CQ::decode()")]),t._v(" "),a("p",[t._v("CQ 码字符反转义。")]),t._v(" "),a("p",[t._v("定义："),a("code",[t._v("CQ::encode($msg, $is_content = false)")])]),t._v(" "),a("p",[t._v("当 "),a("code",[t._v("$is_content")]),t._v(" 为 true 时，会将 "),a("code",[t._v("&#44;")]),t._v(" 转义为 "),a("code",[t._v(",")]),t._v("。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("反转义前")]),t._v(" "),a("th",[t._v("反转义后")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("&amp;")])]),t._v(" "),a("td",[a("code",[t._v("&")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("&#91;")])]),t._v(" "),a("td",[a("code",[t._v("[")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("&#93;")])]),t._v(" "),a("td",[a("code",[t._v("]")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("&#44;")])]),t._v(" "),a("td",[a("code",[t._v(",")])])])])]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$str")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("CQ")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("decode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"&#91;CQ:at,qq=我只是一条普通的文本&#93;"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// 转换为 "[CQ:at,qq=我只是一条普通的文本]"')]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h3",{attrs:{id:"cq-encode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cq-encode"}},[t._v("#")]),t._v(" CQ::encode()")]),t._v(" "),a("p",[t._v("转义 CQ 码的敏感符号，防止 酷Q 把不该解析为 CQ 码的消息内容当作 CQ 码处理。")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$str")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("CQ")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("encode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"[CQ:我只是一条普通的文本]"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// $str: "&#91;CQ:我只是一条普通的文本&#93;"')]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("定义："),a("code",[t._v("CQ::encode($msg, $is_content = false)")])]),t._v(" "),a("p",[t._v("当 "),a("code",[t._v("$is_content")]),t._v(" 为 true 时，会将 "),a("code",[t._v(",")]),t._v(" 转义为 "),a("code",[t._v("&#44;")]),t._v("。")]),t._v(" "),a("h3",{attrs:{id:"cq-escape"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cq-escape"}},[t._v("#")]),t._v(" CQ::escape()")]),t._v(" "),a("p",[t._v("同 "),a("code",[t._v("CQ::encode()")]),t._v("。")]),t._v(" "),a("h3",{attrs:{id:"cq-removecq"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cq-removecq"}},[t._v("#")]),t._v(" CQ::removeCQ()")]),t._v(" "),a("p",[t._v("去除字符串中所有的 CQ 码。")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$str")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("CQ")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeCQ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"[CQ:at,qq=all]这是带表情的全体消息[CQ:face,id=8]"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// $str: "这是带表情的全体消息"')]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h3",{attrs:{id:"cq-getcq"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cq-getcq"}},[t._v("#")]),t._v(" CQ::getCQ()")]),t._v(" "),a("p",[t._v("解析 CQ 码。")]),t._v(" "),a("ul",[a("li",[t._v("定义："),a("code",[t._v("getCQ($msg, $is_object = false)")])]),t._v(" "),a("li",[t._v("参数 "),a("code",[t._v("$is_object")]),t._v(" 为 true 时，返回一个 "),a("code",[t._v("\\ZM\\Entity\\CQObject")]),t._v(" 对象，此对象的属性和下表相同。（2.3.0+ 版本可用）")]),t._v(" "),a("li",[t._v("返回："),a("code",[t._v("数组 | CQObject | null")]),t._v("，见下表。")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("键名")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("type")]),t._v(" "),a("td",[t._v("CQ码类型，比如 "),a("code",[t._v("[CQ:at]")]),t._v(" 中的 "),a("code",[t._v("at")])])]),t._v(" "),a("tr",[a("td",[t._v("params")]),t._v(" "),a("td",[t._v("参数列表，比如 "),a("code",[t._v("[CQ:image,file=123.jpg,url=http://a.com/a.jpg]")]),t._v("，params 为  "),a("code",[t._v('["file" => "123","url" => "http://a.com/a.jpg"]')])])]),t._v(" "),a("tr",[a("td",[t._v("start")]),t._v(" "),a("td",[t._v("此 CQ 码在字符串中的起始位置")])]),t._v(" "),a("tr",[a("td",[t._v("end")]),t._v(" "),a("td",[t._v("此 CQ 码在字符串中的结束位置")])])])]),t._v(" "),a("h3",{attrs:{id:"cq-getallcq"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cq-getallcq"}},[t._v("#")]),t._v(" CQ::getAllCQ()")]),t._v(" "),a("p",[t._v("定义："),a("code",[t._v("CQ::getAllCQ($msg, $is_object = false)")])]),t._v(" "),a("p",[t._v("参数 "),a("code",[t._v("$is_object")]),t._v(" 为 true 时，返回一个 "),a("code",[t._v("\\ZM\\Entity\\CQObject[]")]),t._v(" 对象数组，此对象的属性和上面的表格内相同。（2.3.0+ 版本可用）")]),t._v(" "),a("p",[t._v("解析 CQ 码，和 "),a("code",[t._v("getCQ()")]),t._v(" 的区别是，这个会将字符串中的所有 CQ 码都解析出来，并以同样上方解析出来的数组格式返回。")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("CQ")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAllCQ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"[CQ:at,qq=123]你好啊[CQ:at,qq=456]"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/*\n[\n  [\n    "type" => "at",\n    "params" => [\n      "qq" => "123",\n    ],\n    "start" => 0,\n    "end" => 13,\n  ],\n  [\n    "type" => "at",\n    "params" => [\n      "qq" => "456",\n    ],\n    "start" => 17,\n    "end" => 30,\n  ],\n]\n*/')]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br")])]),a("h2",{attrs:{id:"cq-码列表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cq-码列表"}},[t._v("#")]),t._v(" CQ 码列表")]),t._v(" "),a("h3",{attrs:{id:"cq-face-发送-qq-表情"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cq-face-发送-qq-表情"}},[t._v("#")]),t._v(" CQ::face() - 发送 QQ 表情")]),t._v(" "),a("p",[t._v("发送 QQ 原生表情。")]),t._v(" "),a("p",[t._v("定义："),a("code",[t._v("CQ::face($id)")])]),t._v(" "),a("p",[t._v("参数："),a("code",[t._v("$id")]),t._v(" 为 QQ 表情对应的 ID 号，一些常见的表情 ID 对应的表情样式见 "),a("a",{attrs:{href:"https://static.zhamao.me/face_id.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("QQ 对应表情ID表"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/**\n * @CQCommand("打盹")\n */')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("faceTest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"正在打盹..."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("CQ")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("face")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("chat-box",{attrs:{"my-chats":[{type:0,content:"打盹"},{type:1,content:"正在打盹..."},{type:3,content:"https://docs-v1.zhamao.xin/face/8.gif"}]}}),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("p",[t._v("对于不断更新的 QQ 版本下，可能会持续扩充新的 QQ 表情，如果上表没有新的表情的话，也可以使用消息接收的方式，让机器人收到表情后解析出来对应的 id 然后再发送。")])]),t._v(" "),a("h3",{attrs:{id:"cq-image-发送图片"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cq-image-发送图片"}},[t._v("#")]),t._v(" CQ::image() - 发送图片")]),t._v(" "),a("p",[t._v("发送图片。")]),t._v(" "),a("p",[t._v("定义："),a("code",[t._v("image($file, $cache = true, $flash = false, $proxy = true, $timeout = -1)")])]),t._v(" "),a("p",[t._v("参数")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("参数名")]),t._v(" "),a("th",[t._v("收")]),t._v(" "),a("th",[t._v("发")]),t._v(" "),a("th",[t._v("默认值")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("file")])]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("必填")]),t._v(" "),a("td",[t._v("图片文件名")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("flash")])]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[a("code",[t._v("false")])]),t._v(" "),a("td",[t._v("图片类型，当参数为 true 时代表发送闪照")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("cache")])]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[a("code",[t._v("true")])]),t._v(" "),a("td",[t._v("只在通过网络 URL 发送时有效，表示是否使用已缓存的文件，默认 "),a("code",[t._v("true")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("proxy")])]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[a("code",[t._v("true")])]),t._v(" "),a("td",[t._v("只在通过网络 URL 发送时有效，表示是否通过代理下载文件（需通过环境变量或配置文件配置代理），默认 "),a("code",[t._v("true")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("timeout")])]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[a("code",[t._v("-1")])]),t._v(" "),a("td",[t._v("只在通过网络 URL 发送时有效，单位秒，表示下载网络文件的超时时间，默认 -1 不超时")])])])]),t._v(" "),a("p",[t._v("发送时，"),a("code",[t._v("file")]),t._v(" 参数除了支持使用收到的图片文件名直接发送外，还支持：")]),t._v(" "),a("ul",[a("li",[t._v("绝对路径，例如 "),a("code",[t._v("file:///root/imagetest/1.png")]),t._v("，格式使用 "),a("a",{attrs:{href:"https://tools.ietf.org/html/rfc8089",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("file")]),t._v(" URI"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("网络 URL，例如 "),a("code",[t._v("http://i1.piimg.com/567571/fdd6e7b6d93f1ef0.jpg")])]),t._v(" "),a("li",[t._v("Base64 编码，例如")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("base64://iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAIAAADJt1n/AAAAKElEQVQ4EWPk5+RmIBcwkasRpG9UM4mhNxpgowFGMARGEwnBIEJVAAAdBgBNAZf+QAAAAABJRU5ErkJggg==\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"cq-record-发送语音"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cq-record-发送语音"}},[t._v("#")]),t._v(" CQ::record() - 发送语音")]),t._v(" "),a("p",[t._v("发送语音消息。")]),t._v(" "),a("p",[t._v("定义："),a("code",[t._v("CQ::record($file, $magic = false, $cache = true, $proxy = true, $timeout = -1)")])]),t._v(" "),a("p",[t._v("参数")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("参数名")]),t._v(" "),a("th",[t._v("收")]),t._v(" "),a("th",[t._v("发")]),t._v(" "),a("th",[t._v("默认值")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("file")])]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("必填")]),t._v(" "),a("td",[t._v("音频文件名")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("flash")])]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[a("code",[t._v("false")])]),t._v(" "),a("td",[t._v("图片类型，当参数为 true 时代表发送闪照")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("cache")])]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[a("code",[t._v("true")])]),t._v(" "),a("td",[t._v("只在通过网络 URL 发送时有效，表示是否使用已缓存的文件，默认 "),a("code",[t._v("true")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("proxy")])]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[a("code",[t._v("true")])]),t._v(" "),a("td",[t._v("只在通过网络 URL 发送时有效，表示是否通过代理下载文件（需通过环境变量或配置文件配置代理），默认 "),a("code",[t._v("true")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("timeout")])]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[a("code",[t._v("-1")])]),t._v(" "),a("td",[t._v("只在通过网络 URL 发送时有效，单位秒，表示下载网络文件的超时时间，默认 -1 不超时")])])])]),t._v(" "),a("p",[t._v("发送时，"),a("code",[t._v("file")]),t._v(" 参数除了支持使用收到的语音文件名直接发送外，还支持其它形式，参考上方发送图片。")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/**\n * @CQCommand("说你好")\n */')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("say")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("CQ")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("record")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"https://zhamao.xin/file/hello.mp3"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("chat-box",{attrs:{"my-chats":[{type:0,content:"说你好"},{type:1,content:"[语音消息，点击收听]  2'' )))"}]}}),t._v(" "),a("blockquote",[a("p",[t._v("此 CQ 码只能用于单独一条文本消息中，如果混有其他字符串，则会吞掉其他字符串内容。")])]),t._v(" "),a("h3",{attrs:{id:"cq-at-群里-某人或全体"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cq-at-群里-某人或全体"}},[t._v("#")]),t._v(" CQ::at() - 群里@某人或全体")]),t._v(" "),a("p",[t._v("在群里 at 某个人或全体成员（全体成员需要有管理员权限）。")]),t._v(" "),a("p",[t._v("定义："),a("code",[t._v("CQ::at($qq)")])]),t._v(" "),a("p",[t._v("参数："),a("code",[t._v("$qq")]),t._v(" 参数必填，如果填的是 QQ 号，则是单独 at 某人，如果是 "),a("code",[t._v("all")]),t._v("，则是 at 全体成员。")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/**\n * @CQCommand("at测试")\n */')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("atTest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("CQ")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("at")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("627577391")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('" 你好啊！"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("chat-box",{attrs:{"my-chats":[{type:0,content:"at测试"},{type:1,content:"@鲸鱼 你好啊！"}]}}),t._v(" "),a("h3",{attrs:{id:"cq-video-发送短视频"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cq-video-发送短视频"}},[t._v("#")]),t._v(" CQ::video() - 发送短视频")]),t._v(" "),a("p",[t._v("发送短视频。")]),t._v(" "),a("p",[t._v("定义："),a("code",[t._v("CQ::video($file, $cache = true, $proxy = true, $timeout = -1)")])]),t._v(" "),a("p",[t._v("参数")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("参数名")]),t._v(" "),a("th",[t._v("收")]),t._v(" "),a("th",[t._v("发")]),t._v(" "),a("th",[t._v("默认值")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("file")])]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("必填")]),t._v(" "),a("td",[t._v("短视频文件名")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("cache")])]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[a("code",[t._v("true")])]),t._v(" "),a("td",[t._v("只在通过网络 URL 发送时有效，表示是否使用已缓存的文件，默认 "),a("code",[t._v("true")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("proxy")])]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[a("code",[t._v("true")])]),t._v(" "),a("td",[t._v("只在通过网络 URL 发送时有效，表示是否通过代理下载文件（需通过环境变量或配置文件配置代理），默认 "),a("code",[t._v("true")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("timeout")])]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[a("code",[t._v("-1")])]),t._v(" "),a("td",[t._v("只在通过网络 URL 发送时有效，单位秒，表示下载网络文件的超时时间，默认 -1 不超时")])])])]),t._v(" "),a("p",[t._v("发送时，"),a("code",[t._v("file")]),t._v(" 参数除了支持使用收到的视频文件名直接发送外，还支持其它形式，参考上方发送图片。")]),t._v(" "),a("blockquote",[a("p",[t._v("此 CQ 码只能用于单独一条文本消息中，如果混有其他字符串，则会吞掉其他字符串内容。")])]),t._v(" "),a("h3",{attrs:{id:"cq-rps-猜拳"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cq-rps-猜拳"}},[t._v("#")]),t._v(" CQ::rps() - 猜拳")]),t._v(" "),a("p",[t._v("定义："),a("code",[t._v("CQ::rps()")])]),t._v(" "),a("p",[t._v("用法："),a("code",[t._v("CQ::rps()")])]),t._v(" "),a("blockquote",[a("p",[t._v("此 CQ 码只能用于单独一条文本消息中，如果混有其他字符串，则会吞掉其他字符串内容。")])]),t._v(" "),a("h3",{attrs:{id:"cq-dice-掷骰子"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cq-dice-掷骰子"}},[t._v("#")]),t._v(" CQ::dice() - 掷骰子")]),t._v(" "),a("p",[t._v("定义："),a("code",[t._v("CQ::dice()")])]),t._v(" "),a("p",[t._v("用法："),a("code",[t._v("CQ::dice()")])]),t._v(" "),a("blockquote",[a("p",[t._v("此 CQ 码只能用于单独一条文本消息中，如果混有其他字符串，则会吞掉其他字符串内容。")])]),t._v(" "),a("h3",{attrs:{id:"cq-shake-窗口抖动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cq-shake-窗口抖动"}},[t._v("#")]),t._v(" CQ::shake() - 窗口抖动")]),t._v(" "),a("p",[t._v("定义："),a("code",[t._v("CQ::shake()")])]),t._v(" "),a("p",[t._v("用法："),a("code",[t._v("CQ::shake()")])]),t._v(" "),a("blockquote",[a("p",[t._v("此 CQ 码只能用于单独一条文本消息中，如果混有其他字符串，则会吞掉其他字符串内容。")])]),t._v(" "),a("h3",{attrs:{id:"cq-poke-戳一戳"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cq-poke-戳一戳"}},[t._v("#")]),t._v(" CQ::poke() - 戳一戳")]),t._v(" "),a("p",[t._v("发送戳一戳。")]),t._v(" "),a("p",[t._v("定义："),a("code",[t._v('CQ::poke($type, $id, $name = "")')])]),t._v(" "),a("p",[t._v("参数")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("参数名")]),t._v(" "),a("th",[t._v("收")]),t._v(" "),a("th",[t._v("发")]),t._v(" "),a("th",[t._v("可能的值")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("type")])]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("见 "),a("a",{attrs:{href:"https://github.com/mamoe/mirai/blob/f5eefae7ecee84d18a66afce3f89b89fe1584b78/mirai-core/src/commonMain/kotlin/net.mamoe.mirai/message/data/HummerMessage.kt#L49",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mirai 的 PokeMessage 类"),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("类型")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("id")])]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("同上")]),t._v(" "),a("td",[t._v("ID")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("name")])]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("同上")]),t._v(" "),a("td",[t._v("表情名")])])])]),t._v(" "),a("p",[t._v("例子："),a("code",[t._v("CQ::poke(6,-1)")])]),t._v(" "),a("p",[t._v("效果：放大招")]),t._v(" "),a("blockquote",[a("p",[t._v("此 CQ 码只能用于单独一条文本消息中，如果混有其他字符串，则会吞掉其他字符串内容。")])]),t._v(" "),a("h3",{attrs:{id:"cq-anonymous-匿名发消息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cq-anonymous-匿名发消息"}},[t._v("#")]),t._v(" CQ::anonymous() - 匿名发消息")]),t._v(" "),a("p",[t._v("匿名发消息。需要在允许匿名发消息的群里发。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("p",[t._v("当收到匿名消息时，需要通过 "),a("a",{attrs:{href:"https://github.com/howmanybots/onebot/blob/master/v11/specs/event/message.md#%E7%BE%A4%E6%B6%88%E6%81%AF",target:"_blank",rel:"noopener noreferrer"}},[t._v("消息事件的群消息"),a("OutboundLink")],1),t._v(" 的 "),a("code",[t._v("anonymous")]),t._v(" 字段判断。")])]),t._v(" "),a("p",[t._v("定义："),a("code",[t._v("CQ::anonymous($ignore = 1)")])]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/**\n * @CQCommand("匿名测试")\n */')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("anonymousTest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("CQ")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("anonymous")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"匿名测试"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("h3",{attrs:{id:"cq-share-链接分享"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cq-share-链接分享"}},[t._v("#")]),t._v(" CQ::share() - 链接分享")]),t._v(" "),a("p",[t._v("发送链接分享卡片，可自定义内容。")]),t._v(" "),a("p",[t._v("定义："),a("code",[t._v("CQ::share($url, $title, $content = null, $image = null)")])]),t._v(" "),a("p",[t._v("参数")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("参数名")]),t._v(" "),a("th",[t._v("收")]),t._v(" "),a("th",[t._v("发")]),t._v(" "),a("th",[t._v("可能的值")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("url")])]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("-")]),t._v(" "),a("td",[t._v("URL")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("title")])]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("-")]),t._v(" "),a("td",[t._v("标题")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("content")])]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("-")]),t._v(" "),a("td",[t._v("可选，内容描述")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("image")])]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("-")]),t._v(" "),a("td",[t._v("可选，图片 URL")])])])]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/**\n * @CQCommand("链接分享测试")\n */')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("shareTest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("CQ")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("share")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"https://baidu.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"UC忽悠部"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"震惊！我市一男子在光天化日之下..."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("h3",{attrs:{id:"cq-contact-推荐好友"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cq-contact-推荐好友"}},[t._v("#")]),t._v(" CQ::contact() - 推荐好友")]),t._v(" "),a("p",[t._v("发送推荐好友的卡片。")]),t._v(" "),a("p",[t._v("定义："),a("code",[t._v("CQ::contact($type, $id)")])]),t._v(" "),a("p",[t._v("参数")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("参数名")]),t._v(" "),a("th",[t._v("收")]),t._v(" "),a("th",[t._v("发")]),t._v(" "),a("th",[t._v("可能的值")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("type")])]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[a("code",[t._v("qq")]),t._v("，"),a("code",[t._v("group")])]),t._v(" "),a("td",[t._v("推荐好友或群")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("id")])]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("-")]),t._v(" "),a("td",[t._v("被推荐人的 QQ 号或群号")])])])]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/**\n * @CQCommand("我的名片")\n */')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("myCard")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("CQ")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("contact")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"qq"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUserId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("h3",{attrs:{id:"cq-location-发送位置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cq-location-发送位置"}},[t._v("#")]),t._v(" CQ::location() - 发送位置")]),t._v(" "),a("p",[t._v("发送位置，基于经纬度坐标发的。")]),t._v(" "),a("p",[t._v("定义："),a("code",[t._v('CQ::location($lat, $lon, $title = "", $content = "")')])]),t._v(" "),a("p",[t._v("参数")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("参数名")]),t._v(" "),a("th",[t._v("收")]),t._v(" "),a("th",[t._v("发")]),t._v(" "),a("th",[t._v("可能的值")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("lat")])]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("-")]),t._v(" "),a("td",[t._v("纬度")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("lon")])]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("-")]),t._v(" "),a("td",[t._v("经度")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("title")])]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("-")]),t._v(" "),a("td",[t._v("可选，标题")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("content")])]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("-")]),t._v(" "),a("td",[t._v("可选，内容描述")])])])]),t._v(" "),a("h3",{attrs:{id:"cq-music-音乐分享"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cq-music-音乐分享"}},[t._v("#")]),t._v(" CQ::music() - 音乐分享")]),t._v(" "),a("p",[t._v("分享音乐，通过卡片。")]),t._v(" "),a("p",[t._v("发送音乐分享卡片。此 CQ 码如果伴随着其他文字，则文字内容会被丢弃。")]),t._v(" "),a("p",[t._v("定义："),a("code",[t._v("CQ::music($type, $id_or_url, $audio = null, $title = null, $content = null, $image = null)")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("$type")]),t._v(": 发送类型")]),t._v(" "),a("li",[a("code",[t._v("$id_or_url")]),t._v(": 音乐的 id 或 音乐卡片点进去打开的链接")]),t._v(" "),a("li",[a("code",[t._v("$audio")]),t._v(": 音频文件的 HTTP 地址")]),t._v(" "),a("li",[a("code",[t._v("$title")]),t._v(": 音乐卡片的标题，建议 12 字以内")]),t._v(" "),a("li",[a("code",[t._v("$content")]),t._v(": 音乐卡片的简介内容（可选）")]),t._v(" "),a("li",[a("code",[t._v("$image")]),t._v(": 音乐卡片的图片的链接地址（可选）")])]),t._v(" "),a("p",[t._v("如果 "),a("code",[t._v("$type")]),t._v(" 参数为 "),a("code",[t._v("qq")]),t._v(" 或 "),a("code",[t._v("163")]),t._v(" 或 "),a("code",[t._v("xiami")]),t._v("，则必须且只和第二个参数 "),a("code",[t._v("$id_or_url")]),t._v(" 配合使用。这三个为内置分享，需要先通过搜索功能获取对应平台歌曲的 id 后使用。")]),t._v(" "),a("p",[t._v("如果 "),a("code",[t._v("$type")]),t._v(" 参数为 "),a("code",[t._v("custom")]),t._v("，则表明此音乐卡片为用户自定义，你可以根据自己的需要自定义卡片内容和音频。此时必须填写 "),a("code",[t._v("$id_or_url")]),t._v(", "),a("code",[t._v("$audio")]),t._v(", "),a("code",[t._v("$title")]),t._v(" 三个参数。")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("CQ")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("music")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"163"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"730806"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//一首我喜欢的歌")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 以内置的发送类型发送音乐卡片，我这里挑了网易云音乐的一首歌。")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"custom"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"https://baidu.com/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"https://zhamao.xin/file/hello.mp3"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"我是Siri说出来的Hello"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"不服来打我呀！"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"https://zhamao.xin/file/hello.jpg"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 自定义整个卡片的每个内容")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("h3",{attrs:{id:"cq-forward-合并转发"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cq-forward-合并转发"}},[t._v("#")]),t._v(" CQ::forward() - 合并转发")]),t._v(" "),a("p",[t._v("合并转发消息。")]),t._v(" "),a("p",[t._v("定义："),a("code",[t._v("CQ::forward($id)")])]),t._v(" "),a("p",[t._v("参数")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[CQ:forward,id=123456]\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("table",[a("thead",[a("tr",[a("th",[t._v("参数名")]),t._v(" "),a("th",[t._v("收")]),t._v(" "),a("th",[t._v("发")]),t._v(" "),a("th",[t._v("可能的值")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("id")])]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("必填")]),t._v(" "),a("td",[t._v("合并转发 ID，需通过 "),a("a",{attrs:{href:"https://github.com/howmanybots/onebot/blob/master/v11/specs/api/public.md#get_forward_msg-%E8%8E%B7%E5%8F%96%E5%90%88%E5%B9%B6%E8%BD%AC%E5%8F%91%E6%B6%88%E6%81%AF",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("get_forward_msg")]),t._v(" API"),a("OutboundLink")],1),t._v(" 获取具体内容")])])])]),t._v(" "),a("h3",{attrs:{id:"cq-node-合并转发自定义节点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cq-node-合并转发自定义节点"}},[t._v("#")]),t._v(" CQ::node() - 合并转发自定义节点")]),t._v(" "),a("p",[t._v("接收时，此消息段不会直接出现在消息事件的 "),a("code",[t._v("message")]),t._v(" 中，需通过 "),a("a",{attrs:{href:"https://github.com/howmanybots/onebot/blob/master/v11/specs/api/public.md#get_forward_msg-%E8%8E%B7%E5%8F%96%E5%90%88%E5%B9%B6%E8%BD%AC%E5%8F%91%E6%B6%88%E6%81%AF",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("get_forward_msg")]),t._v(" API"),a("OutboundLink")],1),t._v(" 获取。发送时，通过获取回来的 API 节点信息进行发送。")]),t._v(" "),a("p",[t._v("定义："),a("code",[t._v("CQ::node($user_id, $nickname, $content)")])]),t._v(" "),a("p",[t._v("参数")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("参数名")]),t._v(" "),a("th",[t._v("收")]),t._v(" "),a("th",[t._v("发")]),t._v(" "),a("th",[t._v("可能的值")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("user_id")])]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("-")]),t._v(" "),a("td",[t._v("发送者 QQ 号")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("nickname")])]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("-")]),t._v(" "),a("td",[t._v("发送者昵称")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("content")])]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("✓")]),t._v(" "),a("td",[t._v("-")]),t._v(" "),a("td",[t._v("消息内容，支持发送消息时的 "),a("code",[t._v("message")]),t._v(" 数据类型，见 "),a("a",{attrs:{href:"https://github.com/howmanybots/onebot/blob/master/v11/specs/api/#%E5%8F%82%E6%95%B0",target:"_blank",rel:"noopener noreferrer"}},[t._v("API 的参数"),a("OutboundLink")],1)])])])]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/**\n * @CQCommand("node测试")\n */')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("nodeTest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("CQ")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("node")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("123456")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"Jack"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"[CQ:face,id=123]哈喽～"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("h3",{attrs:{id:"cq-xml-xml-消息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cq-xml-xml-消息"}},[t._v("#")]),t._v(" CQ::xml() - XML 消息")]),t._v(" "),a("p",[t._v("发送 QQ 兼容的 XML 多媒体消息。")]),t._v(" "),a("p",[t._v("定义："),a("code",[t._v("CQ::xml($data)")])]),t._v(" "),a("p",[t._v("参数："),a("code",[t._v("$data")]),t._v(" 为 xml 字符串")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[t._v('/**\n * @CQCommand("xml测试")\n */\npublic function xmlTest() {\n    ctx()->reply(CQ::xml("<?xml ..."));\n}\n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("h3",{attrs:{id:"cq-json-json-消息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cq-json-json-消息"}},[t._v("#")]),t._v(" CQ::json() - JSON 消息")]),t._v(" "),a("p",[t._v("发送 QQ 兼容的 JSON 多媒体消息。")]),t._v(" "),a("p",[t._v("定义："),a("code",[t._v("CQ::json($data, $resid = 0)")])]),t._v(" "),a("p",[t._v("参数同上，内含 JSON 字符串即可。")]),t._v(" "),a("p",[t._v("其中 "),a("code",[t._v("$resid")]),t._v(" 是面向 go-cqhttp 扩展的参数，默认不填为 0，走小程序通道，填了走富文本通道发送。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("p",[t._v("因为某些众所周知的原因，XML 和 JSON 的返回不提供实例，有兴趣的可以自行研究如何编写，文档不含任何相关教程。")])]),t._v(" "),a("h3",{attrs:{id:"cq-custom-扩展自定义-cq-码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cq-custom-扩展自定义-cq-码"}},[t._v("#")]),t._v(" CQ::_custom() - 扩展自定义 CQ 码")]),t._v(" "),a("p",[t._v("用于兼容各类含有被支持的扩展 CQ 码，比如 go-cqhttp 的 "),a("code",[t._v("[CQ:gift]")]),t._v(" 礼物类型。")]),t._v(" "),a("p",[t._v("定义："),a("code",[t._v("CQ::_custom(string $type_name, array $params)")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("参数名")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("type_name")])]),t._v(" "),a("td",[t._v("CQ 码类型，如 "),a("code",[t._v("music")]),t._v("，"),a("code",[t._v("at")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("params")])]),t._v(" "),a("td",[t._v("发送的 CQ 码中的参数数组，例如 "),a("code",[t._v('["qq" => "123456"]')])])])])]),t._v(" "),a("p",[t._v("下面是一个例子：")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("CQ")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("_custom")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"at"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"qq"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"123456"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"qwe"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"asd"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回：[CQ:at,qq=123456,qwe=asd]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])])],1)}),[],!1,null,null,null);s.default=n.exports}}]);