(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{754:function(t,s,a){"use strict";a.r(s);var e=a(108),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"内部类文件手册"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#内部类文件手册"}},[t._v("#")]),t._v(" 内部类文件手册")]),t._v(" "),a("p",[t._v("这个章节写明了在框架使用过程中可能涉及到的框架内部或 Swoole、其他 composer 依赖组件的内部类，这里会根据类的命名空间一一说明。")]),t._v(" "),a("h2",{attrs:{id:"swoole-http-request"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#swoole-http-request"}},[t._v("#")]),t._v(" Swoole\\Http\\Request")]),t._v(" "),a("p",[t._v("此类是 Swoole 内部的一个类，一般在收到 HTTP 请求时，在 "),a("code",[t._v("@RequestMapping")]),t._v(" 或 "),a("code",[t._v("@OnRequestEvent()")]),t._v(" 两个注解下可用，用作获取 GET、POST参数，上传到后端的文件、Cookies 等。详见 "),a("a",{attrs:{href:"http://wiki.swoole.com/#/http_server?id=httprequest",target:"_blank",rel:"noopener noreferrer"}},[t._v("Swoole 文档 - Request"),a("OutboundLink")],1),t._v(" 。")]),t._v(" "),a("h3",{attrs:{id:"属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#属性"}},[t._v("#")]),t._v(" 属性")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("$fd")]),t._v("：获取当前连接的文件描述符 ID。")]),t._v(" "),a("li",[a("code",[t._v("$header")]),t._v("："),a("code",[t._v("HTTP")]),t._v(" 请求的头部信息。类型为数组，所有 "),a("code",[t._v("key")]),t._v(" 均为小写。")]),t._v(" "),a("li",[a("code",[t._v("$server")]),t._v("："),a("code",[t._v("HTTP")]),t._v(" 请求相关的服务器信息。")]),t._v(" "),a("li",[a("code",[t._v("$cookie")]),t._v("：获取 Cookies。")]),t._v(" "),a("li",[a("code",[t._v("$get")]),t._v("：获取 GET 参数。")]),t._v(" "),a("li",[a("code",[t._v("$post")]),t._v("：获取 POST 参数。")]),t._v(" "),a("li",[a("code",[t._v("$files")]),t._v("：获取上传的文件信息")])]),t._v(" "),a("h3",{attrs:{id:"方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方法"}},[t._v("#")]),t._v(" 方法")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("rawContent()")]),t._v("：获取 POST 包原始二进制内容，相当于原生 PHP 的 "),a("code",[t._v('file_get_contents("php://input");')]),t._v(" 。")]),t._v(" "),a("li",[a("code",[t._v("getData()")]),t._v("：获取完整的原始 "),a("code",[t._v("Http")]),t._v(" 请求报文。包括 "),a("code",[t._v("Http Header")]),t._v(" 和 "),a("code",[t._v("Http Body")])])]),t._v(" "),a("h3",{attrs:{id:"示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[t._v("#")]),t._v(" 示例")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TODO")]),t._v("：先放一放。\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h2",{attrs:{id:"zm-entity-matchobject"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zm-entity-matchobject"}},[t._v("#")]),t._v(" ZM\\Entity\\MatchObject")]),t._v(" "),a("p",[t._v("此类是调用方法 "),a("code",[t._v("MessageUtil::matchCommand()")]),t._v(" 返回的对象体，含有匹配成功与否和匹配到的注解相关的信息。")]),t._v(" "),a("h3",{attrs:{id:"属性-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#属性-2"}},[t._v("#")]),t._v(" 属性")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("$match")]),t._v("："),a("code",[t._v("bool")]),t._v(" 类型，返回匹配是否成功")]),t._v(" "),a("li",[a("code",[t._v("$object")]),t._v("："),a("code",[t._v("CQCommand")]),t._v(" 注解类，如果匹配成功则返回对应的 "),a("code",[t._v("@CQCommand")]),t._v(" 信息")]),t._v(" "),a("li",[a("code",[t._v("match")]),t._v("："),a("code",[t._v("array")]),t._v(" 类型，如果匹配成功则返回匹配到的参数")])]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// 假设我有一个注解事件 @CQCommand(match="你好")，绑定的函数是 \\Module\\Example\\Hello 下的 hello123()')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$obj")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("MessageUtil")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("matchCommand")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"你好 我叫顺溜 我今年二十八"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/* 以下是返回信息，仅供参考\n$obj->match ==> true\n$obj->object ==> \\ZM\\Annotation\\CQ\\CQCommand: (\n\tmatch: "你好",\n    pattern: "",\n    regex: "",\n    start_with: "",\n    end_with: "",\n    keyword: "",\n    alias: [],\n    message_type: "",\n    user_id: 0,\n    group_id: 0,\n    discuss_id: 0,\n    level: 20,\n    method: "hello123",\n    class: \\Module\\Example\\Hello::class\n)\n$obj->match ==> [\n\t"我叫顺溜",\n\t"我今年二十八"\n]\n*/')]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br")])])])}),[],!1,null,null,null);s.default=n.exports}}]);