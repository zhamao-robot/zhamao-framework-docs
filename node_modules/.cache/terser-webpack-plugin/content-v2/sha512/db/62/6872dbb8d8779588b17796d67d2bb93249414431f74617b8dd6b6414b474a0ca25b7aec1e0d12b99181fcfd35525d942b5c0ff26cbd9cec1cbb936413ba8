{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{209:function(t,s,a){\"use strict\";a.r(s);var e=a(27),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[a(\"h1\",{attrs:{id:\"编写模块\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#编写模块\"}},[t._v(\"#\")]),t._v(\" 编写模块\")]),t._v(\" \"),a(\"p\",[t._v(\"到现在为止，我们还在使用 zhamao-framework 的默认模块，在开始编写自己的模块应用之前，我们先说明一些编写代码的约定。\")]),t._v(\" \"),a(\"div\",{staticClass:\"custom-block tip\"},[a(\"p\",{staticClass:\"custom-block-title\"},[t._v(\"提示\")]),t._v(\" \"),a(\"p\",[t._v(\"如不特殊说明，本章节所指的父目录均为 \"),a(\"code\",[t._v(\"src/Module/\")]),t._v(\" 模块根目录。\")])]),t._v(\" \"),a(\"h2\",{attrs:{id:\"模块结构\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#模块结构\"}},[t._v(\"#\")]),t._v(\" 模块结构\")]),t._v(\" \"),a(\"p\",[t._v(\"要自定义编写模块代码的话，首先要选好自己起的模块名称（英文），为了遵从开发规范，最好使用驼峰命名（比如 HelloWorld.php）。\")]),t._v(\" \"),a(\"p\",[t._v(\"比如我们想编写一个机器人的娱乐模块，你可以直接将 \"),a(\"code\",[t._v(\"Entertain.php\")]),t._v(\" 文件创建到父目录下，也可以以这样的目录结构创建到父目录下：\")]),t._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v(\"└── Entertain/\\n    └── Main.php\\n\")])]),t._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),a(\"br\")])]),a(\"p\",[t._v(\"而二者的区别在于 \"),a(\"code\",[t._v(\"namespace\")]),t._v(\" 命名空间。\")]),t._v(\" \"),a(\"p\",[t._v(\"比如第一种直接在父目录创建 \"),a(\"code\",[t._v(\"Entertain.php\")]),t._v(\" 时，内部应该这样写：\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-php line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-php\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token php language-php\"}},[a(\"span\",{pre:!0,attrs:{class:\"token delimiter important\"}},[t._v(\"<?php\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"namespace\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token package\"}},[t._v(\"Module\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"use\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token package\"}},[t._v(\"ZM\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"\\\\\")]),t._v(\"ModBase\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"class\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Entertain\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"extends\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"ModBase\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])])]),t._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),a(\"br\")])]),a(\"p\",[t._v(\"第二种方式构建时，\"),a(\"code\",[t._v(\"Main.php\")]),t._v(\" 应该这样写：\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-php line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-php\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token php language-php\"}},[a(\"span\",{pre:!0,attrs:{class:\"token delimiter important\"}},[t._v(\"<?php\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"namespace\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token package\"}},[t._v(\"Module\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"\\\\\")]),t._v(\"Entertain\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"use\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token package\"}},[t._v(\"ZM\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"\\\\\")]),t._v(\"ModBase\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"class\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Main\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"extends\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"ModBase\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])])]),t._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),a(\"br\")])]),a(\"p\",[t._v(\"简而言之，模块类的命名空间应该为 \"),a(\"code\",[t._v(\"Module\\\\{你的子目录名}\")]),t._v(\"，类名应该与 \"),a(\"code\",[t._v(\"xx.php\")]),t._v(\" 的 \"),a(\"code\",[t._v(\"xx\")]),t._v(\" 相同。同时，只要是用到需要注解的类，一定要继承 \"),a(\"code\",[t._v(\"ModBase\")]),t._v(\" 基类，否则无法正常使用注解类和模块的基类方法。\")]),t._v(\" \"),a(\"div\",{staticClass:\"custom-block warning\"},[a(\"p\",{staticClass:\"custom-block-title\"},[t._v(\"警告\")]),t._v(\" \"),a(\"p\",[t._v(\"如果没有遵守上方的规则的话，在加载框架时就会报错，无法找到对应的类。因为框架的注解解析依赖于文件名和命名空间。\")])]),t._v(\" \"),a(\"h2\",{attrs:{id:\"基类变量\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#基类变量\"}},[t._v(\"#\")]),t._v(\" 基类变量\")]),t._v(\" \"),a(\"p\",[t._v(\"这个是说明在各种不同事件触发后，会写到模块类基类中的类成员变量，方便对不同事件的快速响应。 下方是一个表，列出了所有可使用的成员变量对应注解事件的关系。这里建议先阅读下一章 \"),a(\"strong\",[t._v(\"注解和事件\")]),t._v(\" 再阅读本节。\")]),t._v(\" \"),a(\"table\",[a(\"thead\",[a(\"tr\",[a(\"th\",[t._v(\"变量名称\")]),t._v(\" \"),a(\"th\",[t._v(\"类型\")]),t._v(\" \"),a(\"th\",[t._v(\"可用的注解事件\")])])]),t._v(\" \"),a(\"tbody\",[a(\"tr\",[a(\"td\",[a(\"code\",[t._v(\"$this->server\")])]),t._v(\" \"),a(\"td\",[a(\"code\",[t._v(\"\\\\Swoole\\\\Server\")]),t._v(\" 或 \"),a(\"code\",[t._v(\"\\\\Swoole\\\\Websocket\\\\Server\")])]),t._v(\" \"),a(\"td\",[a(\"code\",[t._v('@SwooleEventAt(\"message\")')]),a(\"br\"),a(\"code\",[t._v('@SwooleEventAt(\"close\")')]),a(\"br\"),a(\"code\",[t._v('@SwooleEventAt(\"open\")')]),a(\"br\"),a(\"code\",[t._v('@SwooleEventAfter(\"workerStart\")')]),a(\"br\"),a(\"code\",[t._v(\"@所有CQ事件\")])])]),t._v(\" \"),a(\"tr\",[a(\"td\",[a(\"code\",[t._v(\"$this->frame\")])]),t._v(\" \"),a(\"td\",[a(\"code\",[t._v(\"\\\\Swoole\\\\WebSocket\\\\Frame\")])]),t._v(\" \"),a(\"td\",[a(\"code\",[t._v(\"@所有CQ事件\")]),a(\"br\"),a(\"code\",[t._v('@SwooleEventAt(\"message\")')])])]),t._v(\" \"),a(\"tr\",[a(\"td\",[a(\"code\",[t._v(\"$this->data\")])]),t._v(\" \"),a(\"td\",[t._v(\"CQHTTP 发来的事件的数组\")]),t._v(\" \"),a(\"td\",[a(\"code\",[t._v(\"@所有CQ事件\")])])]),t._v(\" \"),a(\"tr\",[a(\"td\",[a(\"code\",[t._v(\"$this->request\")])]),t._v(\" \"),a(\"td\",[a(\"code\",[t._v(\"\\\\Swoole\\\\Http\\\\Request\")])]),t._v(\" \"),a(\"td\",[a(\"code\",[t._v('@SwooleEventAt(\"request\")')]),a(\"br\"),a(\"code\",[t._v(\"@RequestMapping()\")]),a(\"br\"),a(\"code\",[t._v('@SwooleEventAt(\"open\")')])])]),t._v(\" \"),a(\"tr\",[a(\"td\",[a(\"code\",[t._v(\"$this->response\")])]),t._v(\" \"),a(\"td\",[a(\"code\",[t._v(\"\\\\ZM\\\\Http\\\\Response\")]),t._v(\" 继承于 \"),a(\"code\",[t._v(\"\\\\Swoole\\\\Http\\\\Response\")])]),t._v(\" \"),a(\"td\",[a(\"code\",[t._v('@SwooleEventAt(\"request\")')]),a(\"br\"),a(\"code\",[t._v(\"@RequestMapping()\")])])]),t._v(\" \"),a(\"tr\",[a(\"td\",[a(\"code\",[t._v(\"$this->fd\")])]),t._v(\" \"),a(\"td\",[t._v(\"int，连接的 fd 号\")]),t._v(\" \"),a(\"td\",[a(\"code\",[t._v('@SwooleEventAt(\"close\")')])])]),t._v(\" \"),a(\"tr\",[a(\"td\",[a(\"code\",[t._v(\"$this->worker_id\")])]),t._v(\" \"),a(\"td\",[t._v(\"int\")]),t._v(\" \"),a(\"td\",[a(\"code\",[t._v('@SwooleEventAfter(\"workerStart\")')])])]),t._v(\" \"),a(\"tr\",[a(\"td\",[a(\"code\",[t._v(\"$this->connection\")])]),t._v(\" \"),a(\"td\",[t._v(\"基于 \"),a(\"code\",[t._v(\"\\\\ZM\\\\Connection\\\\WSConnection\")]),t._v(\" 的对象\")]),t._v(\" \"),a(\"td\",[a(\"code\",[t._v(\"@所有CQ事件\")]),a(\"br\"),a(\"code\",[t._v('@SwooleEventAt(\"message\")')]),a(\"br\"),a(\"code\",[t._v('@SwooleEventAt(\"open\")')])])]),t._v(\" \"),a(\"tr\",[a(\"td\",[a(\"code\",[t._v(\"$this->handle_type\")])]),t._v(\" \"),a(\"td\",[t._v(\"int，此模块此函数调用的标记模式\")]),t._v(\" \"),a(\"td\",[t._v(\"所有在模块内的事件\")])]),t._v(\" \"),a(\"tr\",[a(\"td\",[a(\"code\",[t._v(\"$this->block_continue\")])]),t._v(\" \"),a(\"td\",[t._v(\"bool，用于标注断言，true 时不执行同类低等级的模块\")]),t._v(\" \"),a(\"td\",[t._v(\"所有在模块内的事件\")])])])]),t._v(\" \"),a(\"h2\",{attrs:{id:\"基类方法\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#基类方法\"}},[t._v(\"#\")]),t._v(\" 基类方法\")]),t._v(\" \"),a(\"div\",{staticClass:\"custom-block tip\"},[a(\"p\",{staticClass:\"custom-block-title\"},[t._v(\"提示\")]),t._v(\" \"),a(\"p\",[t._v(\"基类方法为方便各个事件函数内使用的工具函数，例如聊天机器人的快捷回复，获取发送此消息的人的 QQ 等。\")])]),t._v(\" \"),a(\"h3\",{attrs:{id:\"reply\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#reply\"}},[t._v(\"#\")]),t._v(\" reply()\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[a(\"p\",[t._v(\"参数：\"),a(\"code\",[t._v(\"reply($msg, $yield = false)\")])])]),t._v(\" \"),a(\"li\",[a(\"p\",[t._v(\"用途：在 \"),a(\"code\",[t._v(\"message\")]),t._v(\" 类触发的事件函数下快速回复用户文本。\")])]),t._v(\" \"),a(\"li\",[a(\"p\",[t._v(\"用法示例：\"),a(\"code\",[t._v('$this->reply(\"今夜阳光明媚\");')])])])]),t._v(\" \"),a(\"blockquote\",[a(\"p\",[t._v(\"对于简单的文本处理，也可以直接在函数内使用 \"),a(\"code\",[t._v('return \"abc\";')]),t._v(\" 返回字符串类型的也可回复文本。\")])]),t._v(\" \"),a(\"h3\",{attrs:{id:\"finalreply\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#finalreply\"}},[t._v(\"#\")]),t._v(\" finalReply()\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"参数：\"),a(\"code\",[t._v(\"finalReply($msg, $yield = false)\")])]),t._v(\" \"),a(\"li\",[t._v(\"用途：同 \"),a(\"code\",[t._v(\"reply()\")]),t._v(\"，但会自动忽略空消息并且将 \"),a(\"code\",[t._v(\"block_continue\")]),t._v(\" 设置为 \"),a(\"code\",[t._v(\"true\")]),t._v(\" 阻止其他模块继续处理此消息\")])]),t._v(\" \"),a(\"h3\",{attrs:{id:\"getmessage\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#getmessage\"}},[t._v(\"#\")]),t._v(\" getMessage()\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"用途：获取消息文本\")]),t._v(\" \"),a(\"li\",[t._v(\"用法：\"),a(\"code\",[t._v(\"$msg = $this->getMessage();\")])])]),t._v(\" \"),a(\"h3\",{attrs:{id:\"getuserid\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#getuserid\"}},[t._v(\"#\")]),t._v(\" getUserId()\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"用途：获取用户的QQ（id）\")])]),t._v(\" \"),a(\"h3\",{attrs:{id:\"getgroupid\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#getgroupid\"}},[t._v(\"#\")]),t._v(\" getGroupId()\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"用途：获取QQ群号\")])]),t._v(\" \"),a(\"h3\",{attrs:{id:\"getmessagetype\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#getmessagetype\"}},[t._v(\"#\")]),t._v(\" getMessageType()\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"用途：获取事件中的 \"),a(\"code\",[t._v(\"message_type\")]),t._v(\" 参数\")])]),t._v(\" \"),a(\"h3\",{attrs:{id:\"getrobotid\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#getrobotid\"}},[t._v(\"#\")]),t._v(\" getRobotId()\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"用途：获取收到事件的机器人自己的 QQ 号码\")])]),t._v(\" \"),a(\"h3\",{attrs:{id:\"getconnection\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#getconnection\"}},[t._v(\"#\")]),t._v(\" getConnection()\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"用途：获取发来此 CQHTTP 事件的连接对象\")])]),t._v(\" \"),a(\"blockquote\",[a(\"p\",[t._v(\"关于连接对象的用途，请到 WebSocket 服务器 章节。\")])]),t._v(\" \"),a(\"h3\",{attrs:{id:\"setblock\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#setblock\"}},[t._v(\"#\")]),t._v(\" setBlock()\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"用途：设置阻断\")])]),t._v(\" \"),a(\"h3\",{attrs:{id:\"waitmessage\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#waitmessage\"}},[t._v(\"#\")]),t._v(\" waitMessage()\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"参数：\"),a(\"code\",[t._v('waitMessage($prompt = \"\", $timeout = 600, $timeout_prompt = \"\")')])]),t._v(\" \"),a(\"li\",[t._v(\"用途：等待用户输入消息\")])]),t._v(\" \"),a(\"p\",[a(\"code\",[t._v(\"$prompt\")]),t._v(\" 参数为回复用户的文本内容，\"),a(\"code\",[t._v(\"$timeout\")]),t._v(\" 是等待用户回复的超时时间(秒)，\"),a(\"code\",[t._v(\"$timeout_prompt\")]),t._v(\" 是超时后回复用户的文本。\")]),t._v(\" \"),a(\"p\",[t._v(\"用法示例：\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-php line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-php\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v('/**\\n * @CQCommand(\"自我介绍\")\\n */')]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"function\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"yourName\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t._v(\"$r\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t._v(\"$this\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"-\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\">\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"waitMessage\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[t._v('\"你叫啥名字呀？\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"600\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[t._v('\"你都10分钟不理我了，嘤嘤嘤\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t._v(\"$this\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"-\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\">\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"finalReply\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[t._v('\"好的，可爱的机器人记住你叫 \"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t._v(\"$r\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[t._v('\" 啦！以后多聊天哦！\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])]),t._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"7\")]),a(\"br\")])]),a(\"p\",[t._v(\"效果就是，给机器人发送 \"),a(\"code\",[t._v(\"自我介绍\")]),t._v(\" 后，它问你 \"),a(\"code\",[t._v(\"你叫啥名字呀？\")]),t._v(\"，如果你在 10 分钟内回复了机器人，则会回你下面一条句子，如果 10 分钟还没有回复，则机器人会回复你不理你的句子。\")]),t._v(\" \"),a(\"h3\",{attrs:{id:\"getargs\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#getargs\"}},[t._v(\"#\")]),t._v(\" getArgs()\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"参数：\"),a(\"code\",[t._v(\"getArgs(&$arg, $mode, $prompt_msg)\")])]),t._v(\" \"),a(\"li\",[t._v(\"用途：是 \"),a(\"code\",[t._v(\"waitMessage()\")]),t._v(\" 的封装，常用于配合 \"),a(\"code\",[t._v(\"@CQCommand\")]),t._v(\" 使用，在 \"),a(\"code\",[t._v(\"@CQCommand\")]),t._v(\" 介绍中就用了此函数，可以看其中的例子。\")])]),t._v(\" \"),a(\"p\",[a(\"code\",[t._v(\"$arg\")]),t._v(\" 为命令传递进入的参数引用。\")]),t._v(\" \"),a(\"p\",[a(\"code\",[t._v(\"$mode\")]),t._v(\" 支持：\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[a(\"code\",[t._v(\"ZM_MATCH_ALL\")]),t._v(\"：获取除命令本身外的所有后续内容，例如 \"),a(\"code\",[t._v(\"疫情 iafwebfuaw 乏味\")]),t._v(\"，match 后就会匹配到 \"),a(\"code\",[t._v(\"iafwebfuaw 乏味\")]),t._v(\"。如果触发命令只有参数本身的时候，则调用 \"),a(\"code\",[t._v(\"waitMessage\")]),t._v(\" 等待用户输入参数。\")]),t._v(\" \"),a(\"li\",[a(\"code\",[t._v(\"ZM_MATCH_NUMBER\")]),t._v(\"：获取后续参数中第一个数字参数，例如 \"),a(\"code\",[t._v(\"疫情 北京 123\")]),t._v(\"，match 后就会获取到 \"),a(\"code\",[t._v(\"123\")]),t._v(\"。如果触发命令没有数字的时候，则调用 \"),a(\"code\",[t._v(\"waitMessage\")]),t._v(\" 等待用户输入参数。\")]),t._v(\" \"),a(\"li\",[a(\"code\",[t._v(\"ZM_MATCH_FIRST\")]),t._v(\"：获取命令后的第一个参数，例如 \"),a(\"code\",[t._v(\"疫情 北京 123\")]),t._v(\"，match 后就会获取到 \"),a(\"code\",[t._v(\"北京\")]),t._v(\"。如果触发命令只有参数本身的时候，则调用 \"),a(\"code\",[t._v(\"waitMessage\")]),t._v(\" 等待用户输入参数。\")])]),t._v(\" \"),a(\"p\",[a(\"code\",[t._v(\"$prompt_msg\")]),t._v(\"：当遇到等待的时候，向用户发送输入的提醒消息内容，同 \"),a(\"code\",[t._v(\"waitMesssage\")]),t._v(\" 的 \"),a(\"code\",[t._v(\"$prompt\")]),t._v(\"。\")]),t._v(\" \"),a(\"h2\",{attrs:{id:\"编写第一个功能\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#编写第一个功能\"}},[t._v(\"#\")]),t._v(\" 编写第一个功能\")]),t._v(\" \"),a(\"p\",[t._v(\"通过上方的了解，我们现在进行一个最简单的随机数功能的开发吧！\")]),t._v(\" \"),a(\"p\",[t._v(\"首先我们先确定自身想要处理的格式，例如 \"),a(\"code\",[t._v(\"随机数 1 100\")]),t._v(\"，或者 \"),a(\"code\",[t._v(\"从1到100的随机数\")]),t._v(\"。\")]),t._v(\" \"),a(\"p\",[t._v(\"我们先新建一个模块，或者在已有的模块类内新建函数，最后如下：\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-php line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-php\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token php language-php\"}},[a(\"span\",{pre:!0,attrs:{class:\"token delimiter important\"}},[t._v(\"<?php\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"namespace\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token package\"}},[t._v(\"Module\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"\\\\\")]),t._v(\"Entertain\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"use\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token package\"}},[t._v(\"ZM\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"\\\\\")]),t._v(\"ModBase\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"use\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token package\"}},[t._v(\"ZM\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"\\\\\")]),t._v(\"Annotation\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"\\\\\")]),t._v(\"CQ\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"\\\\\")]),t._v(\"CQCommand\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"class\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"RandNum\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"extends\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"ModBase\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v('/**\\n     * @CQCommand(\"随机数\")\\n     * @CQCommand(regexMatch=\"*从*到*的随机数\")\\n     */')]),t._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"function\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"randNum\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t._v(\"$arg\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n      \\t\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 获取第一个数字类型的参数\")]),t._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t._v(\"$num1\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t._v(\"$this\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"-\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\">\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"getArgs\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t._v(\"$arg\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token constant\"}},[t._v(\"ZM_MATCH_NUMBER\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[t._v('\"请输入第一个数字\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n      \\t\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 获取第二个数字类型的参数\")]),t._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t._v(\"$num2\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t._v(\"$this\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"-\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\">\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"getArgs\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t._v(\"$arg\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token constant\"}},[t._v(\"ZM_MATCH_NUMBER\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[t._v('\"请输入第二个数字\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 回复用户结果\")]),t._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t._v(\"$this\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"-\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\">\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"reply\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[t._v('\"随机数是：\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"mt_rand\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"intval\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t._v(\"$num1\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"intval\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t._v(\"$num2\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])])]),t._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"16\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"17\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"18\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"19\")]),a(\"br\")])])])}),[],!1,null,null,null);s.default=n.exports}}]);","extractedComments":[]}