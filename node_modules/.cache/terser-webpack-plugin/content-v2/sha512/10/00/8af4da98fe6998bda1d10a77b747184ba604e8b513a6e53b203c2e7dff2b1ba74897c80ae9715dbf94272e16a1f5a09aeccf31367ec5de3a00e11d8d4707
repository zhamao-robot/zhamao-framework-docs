{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{207:function(t,s,a){\"use strict\";a.r(s);var e=a(27),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[a(\"h1\",{attrs:{id:\"框架组件\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#框架组件\"}},[t._v(\"#\")]),t._v(\" 框架组件\")]),t._v(\" \"),a(\"h2\",{attrs:{id:\"cqhttp-api\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#cqhttp-api\"}},[t._v(\"#\")]),t._v(\" CQHTTP API\")]),t._v(\" \"),a(\"p\",[t._v(\"在框架内，不仅可以使用基类函数来进行操作，也可以直接使用封装好的 CQHTTP API 接口。此接口组件所有调用方式均为静态方法，可在模块任意位置调用。\")]),t._v(\" \"),a(\"div\",{staticClass:\"custom-block warning\"},[a(\"p\",{staticClass:\"custom-block-title\"},[t._v(\"注意\")]),t._v(\" \"),a(\"p\",[t._v(\"由于框架本身支持多机器人同时连接，所以所有 API 请求操作均需要带有要请求到的机器人的 id 或链接对象。\")])]),t._v(\" \"),a(\"h3\",{attrs:{id:\"调用方式\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#调用方式\"}},[t._v(\"#\")]),t._v(\" 调用方式\")]),t._v(\" \"),a(\"p\",[t._v(\"首先就是需要在模块最上面 \"),a(\"code\",[t._v(\"use ZM\\\\API\\\\CQAPI;\")]),t._v(\" 才能使用。\")]),t._v(\" \"),a(\"p\",[t._v(\"用法：\"),a(\"code\",[t._v(\"CQAPI::API名称($robot, $param = [], $yield = null);\")])]),t._v(\" \"),a(\"p\",[t._v(\"API 名称为 CQHTTP 对应的 API 名称，例如 \"),a(\"code\",[t._v(\"send_private_msg\")]),t._v(\"，\"),a(\"code\",[t._v(\"get_status\")]),t._v(\" 等。可到 CQHTTP 文档 - API 查看。\")]),t._v(\" \"),a(\"p\",[t._v(\"参数解释：\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[a(\"code\",[t._v(\"$robot\")]),t._v(\" 为机器人的 QQ 或连接对象。连接对象可通过 \"),a(\"code\",[t._v(\"$this->getConnection()\")]),t._v(\" 获取。对象解释请见 \"),a(\"strong\",[t._v(\"WebSocket 服务器\")]),t._v(\" 一章。\")]),t._v(\" \"),a(\"li\",[a(\"code\",[t._v(\"$param\")]),t._v(\" 对应 CQHTTP API 接口需要的参数，参见 \"),a(\"a\",{attrs:{href:\"https://cqhttp.cc/docs/#/API\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"CQHTTP 文档 - API\"),a(\"OutboundLink\")],1),t._v(\"。\")]),t._v(\" \"),a(\"li\",[a(\"code\",[t._v(\"$yield\")]),t._v(\" 为 API 请求返回结果后处理的方式。如果 \"),a(\"code\",[t._v(\"$yield\")]),t._v(\" 是匿名函数的话，则会在 API 请求返回后回调匿名函数。如果是 \"),a(\"code\",[t._v(\"true\")]),t._v(\" 的话，则会在发送 API 请求后协程等待，收到结果后作为 API 函数调用的返回值。\")])]),t._v(\" \"),a(\"div\",{staticClass:\"custom-block warning\"},[a(\"p\",{staticClass:\"custom-block-title\"},[t._v(\"注意\")]),t._v(\" \"),a(\"p\",[t._v(\"当使用 \"),a(\"code\",[t._v(\"$yield = true\")]),t._v(\" 时，会将处理当前消息的整个协程挂起，直到 CQHTTP 插件返回此 API 执行的结果。结果返回值自动处理成了数组，返回内容参见 \"),a(\"a\",{attrs:{href:\"https://cqhttp.cc/docs/#/API\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"CQHTTP 文档 - API\"),a(\"OutboundLink\")],1),t._v(\"。\")])]),t._v(\" \"),a(\"p\",[t._v(\"框架封装方式为 PHP 的魔术方法映射对应 API 进行操作，所以对应 API 可以查阅 \"),a(\"a\",{attrs:{href:\"https://cqhttp.cc/docs/#/API\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"CQHTTP 文档 - API\"),a(\"OutboundLink\")],1),t._v(\"。\")]),t._v(\" \"),a(\"p\",[t._v(\"例子：\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-php line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-php\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token constant\"}},[t._v(\"CQAPI\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"send_private_msg\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t._v(\"$this\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"-\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\">\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"getConnection\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[t._v('\"user_id\"')]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\">\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"123456\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[t._v('\"message\"')]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\">\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[t._v('\"我是复读机\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\")])]),t._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),a(\"br\")])]),a(\"h3\",{attrs:{id:\"api-兼容性\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#api-兼容性\"}},[t._v(\"#\")]),t._v(\" API 兼容性\")]),t._v(\" \"),a(\"p\",[t._v(\"当你在使用 PhpStorm 或 IDEA 等 IDE 编写代码时，如果为了保证代码风格统一，在写 CQAPI 调用时，不仅可以写上面提到的和 CQHTTP 文档相同的 API，也可以使用驼峰命名法编写 API名称。例如 \"),a(\"code\",[t._v(\"CQAPI::send_group_msg\")]),t._v(\" 可以写成 \"),a(\"code\",[t._v(\"CQAPI::sendGroupMsg\")]),t._v(\"。\")]),t._v(\" \"),a(\"p\",[t._v(\"如果在使用过程中调用了未知的 API 时，框架会抛出异常，中断此次事件。\")]),t._v(\" \"),a(\"h3\",{attrs:{id:\"响应处理\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#响应处理\"}},[t._v(\"#\")]),t._v(\" 响应处理\")]),t._v(\" \"),a(\"p\",[t._v(\"对于上面提到的 \"),a(\"code\",[t._v(\"$yield\")]),t._v(\" 参数，就是用来处理 API 响应结果的。当其为匿名函数，如下，你可以像下面这样处理结果。比如向终端报告消息处理正常：\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-php line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-php\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token constant\"}},[t._v(\"CQAPI\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"send_group_msg\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"12345\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[t._v('\"group_id\"')]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\">\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"100000\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[t._v('\"message\"')]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\">\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[t._v('\"test\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"function\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t._v(\"$response\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t._v(\"$origin\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"if\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t._v(\"$response\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[t._v('\"retcode\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"==\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"200\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"echo\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[t._v('\"成功地发出了消息: \"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t._v(\"$origin\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[t._v('\"params\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[t._v('\"message\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\")])]),t._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"5\")]),a(\"br\")])]),a(\"p\",[t._v(\"也可以使用 \"),a(\"code\",[t._v(\"$yield = true\")]),t._v(\" 协程等待，在返回结果后会作为 API 调用的返回值。\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-php line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-php\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t._v(\"$msg\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token constant\"}},[t._v(\"CQAPI\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"send_group_msg\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"123\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[t._v('\"group_id\"')]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\">\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"12345\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[t._v('\"message\"')]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\">\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[t._v('\"test\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token boolean constant\"}},[t._v(\"true\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"if\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t._v(\"$msg\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[t._v('\"retcode\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"==\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"200\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"echo\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[t._v('\"成功发出了消息：\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t._v(\"$msg\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[t._v('\"params\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[t._v('\"message\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])]),t._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),a(\"br\")])]),a(\"div\",{staticClass:\"custom-block tip\"},[a(\"p\",{staticClass:\"custom-block-title\"},[t._v(\"提示\")]),t._v(\" \"),a(\"p\",[t._v(\"对于 模块基类的快速回复方法，也可以使用如上的响应方式，因为 \"),a(\"code\",[t._v(\"$this->reply()\")]),t._v(\"的第二个参数也是 \"),a(\"code\",[t._v(\"$yield\")]),t._v(\"，和上方相同。\")])]),t._v(\" \"),a(\"h2\",{attrs:{id:\"cq-码\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#cq-码\"}},[t._v(\"#\")]),t._v(\" CQ 码\")]),t._v(\" \"),a(\"p\",[t._v(\"框架提供了 CQ 码的封装，你可以在任何位置使用封装好的 CQ 码类。\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"命名空间：\"),a(\"code\",[t._v(\"use ZM\\\\API\\\\CQ;\")])])]),t._v(\" \"),a(\"div\",{staticClass:\"language-php line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-php\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t._v(\"$this\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"-\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\">\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"reply\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token constant\"}},[t._v(\"CQ\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"image\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[t._v('\"a.jpg\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v('//执行后CQ::image被替换为字符串：\"[CQ:image,file=a.jpg]\"')]),t._v(\"\\n\")])]),t._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),a(\"br\")])]),a(\"p\",[t._v(\"返回 CQ 码，支持 CQHTTP 插件提供的 \"),a(\"a\",{attrs:{href:\"https://cqhttp.cc/docs/#/CQCode?id=%E5%A2%9E%E5%BC%BA%E5%8A%9F%E8%83%BD%E5%88%97%E8%A1%A8\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"增强特性\"),a(\"OutboundLink\")],1),t._v(\"。\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-php line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-php\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"//$file 为图片文件名，支持增强特性\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"//$cache 为是否缓存，默认为否\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token constant\"}},[t._v(\"CQ\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"image\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t._v(\"$file\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t._v(\"$cache\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token boolean constant\"}},[t._v(\"false\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\")])]),t._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),a(\"br\")])]),a(\"h2\",{attrs:{id:\"数据管理\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#数据管理\"}},[t._v(\"#\")]),t._v(\" 数据管理\")]),t._v(\" \"),a(\"p\",[t._v(\"数据管理类是 \"),a(\"code\",[t._v(\"DataProvider\")]),t._v(\"，命名空间：\"),a(\"code\",[t._v(\"ZM\\\\Utils\\\\DataProvider\")]),t._v(\"。方法均为静态方法。\")]),t._v(\" \"),a(\"h3\",{attrs:{id:\"getresourcefolder\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#getresourcefolder\"}},[t._v(\"#\")]),t._v(\" getResourceFolder()\")]),t._v(\" \"),a(\"p\",[t._v(\"获取资源文件夹目录。\")]),t._v(\" \"),a(\"h3\",{attrs:{id:\"addsavebuffer\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#addsavebuffer\"}},[t._v(\"#\")]),t._v(\" addSaveBuffer()\")]),t._v(\" \"),a(\"p\",[t._v(\"同注解 \"),a(\"code\",[t._v(\"@SaveBuffer\")]),t._v(\" 的作用。\")]),t._v(\" \"),a(\"h3\",{attrs:{id:\"savebuffer\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#savebuffer\"}},[t._v(\"#\")]),t._v(\" saveBuffer()\")]),t._v(\" \"),a(\"p\",[t._v(\"保存所有自动保存的缓存变量到文件\")]),t._v(\" \"),a(\"h2\",{attrs:{id:\"zmutil-杂项\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#zmutil-杂项\"}},[t._v(\"#\")]),t._v(\" ZMUtil 杂项\")]),t._v(\" \"),a(\"h3\",{attrs:{id:\"checkwait\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#checkwait\"}},[t._v(\"#\")]),t._v(\" checkWait()\")]),t._v(\" \"),a(\"p\",[t._v(\"此函数为内部调用，用途是在 \"),a(\"code\",[t._v(\"WorkerStart\")]),t._v(\" 事件执行完之前其他事件需要等待，待其执行完之后会恢复执行。\")]),t._v(\" \"),a(\"h3\",{attrs:{id:\"stop\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#stop\"}},[t._v(\"#\")]),t._v(\" stop()\")]),t._v(\" \"),a(\"p\",[t._v(\"停止运行框架，并保存所有数据和断开所有连接。\")]),t._v(\" \"),a(\"h3\",{attrs:{id:\"gethttpcodepage\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#gethttpcodepage\"}},[t._v(\"#\")]),t._v(\" getHttpCodePage()\")]),t._v(\" \"),a(\"p\",[t._v(\"获取 HTTP 状态对应的默认页面的内容。\")]),t._v(\" \"),a(\"h3\",{attrs:{id:\"reload\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#reload\"}},[t._v(\"#\")]),t._v(\" reload()\")]),t._v(\" \"),a(\"p\",[t._v(\"重启框架，重新加载除 \"),a(\"code\",[t._v(\"src/Framework/\")]),t._v(\" 外的所有代码文件。\")]),t._v(\" \"),a(\"h3\",{attrs:{id:\"getcq\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#getcq\"}},[t._v(\"#\")]),t._v(\" getCQ()\")]),t._v(\" \"),a(\"p\",[t._v(\"解析CQ码。\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"参数：\"),a(\"code\",[t._v(\"getCQ($msg);\")]),t._v(\"：要解析出 CQ 码的消息。\")]),t._v(\" \"),a(\"li\",[t._v(\"返回：\"),a(\"code\",[t._v(\"数组 | null\")]),t._v(\"，见下表\")])]),t._v(\" \"),a(\"table\",[a(\"thead\",[a(\"tr\",[a(\"th\",[t._v(\"键名\")]),t._v(\" \"),a(\"th\",[t._v(\"说明\")])])]),t._v(\" \"),a(\"tbody\",[a(\"tr\",[a(\"td\",[t._v(\"type\")]),t._v(\" \"),a(\"td\",[t._v(\"CQ码类型，比如 \"),a(\"code\",[t._v(\"[CQ:at]\")]),t._v(\" 中的 \"),a(\"code\",[t._v(\"at\")])])]),t._v(\" \"),a(\"tr\",[a(\"td\",[t._v(\"params\")]),t._v(\" \"),a(\"td\",[t._v(\"参数列表，比如 \"),a(\"code\",[t._v(\"[CQ:image,file=123.jpg,url=http://a.com/a.jpg]\")]),t._v(\"，params 为  \"),a(\"code\",[t._v('[\"file\" => \"123\",\"url\" => \"http://a.com/a.jpg\"]')])])]),t._v(\" \"),a(\"tr\",[a(\"td\",[t._v(\"start\")]),t._v(\" \"),a(\"td\",[t._v(\"此 CQ 码在字符串中的起始位置\")])]),t._v(\" \"),a(\"tr\",[a(\"td\",[t._v(\"end\")]),t._v(\" \"),a(\"td\",[t._v(\"此 CQ 码在字符串中的结束位置\")])])])]),t._v(\" \"),a(\"h2\",{attrs:{id:\"zmbuf-缓存类\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#zmbuf-缓存类\"}},[t._v(\"#\")]),t._v(\" ZMBuf 缓存类\")]),t._v(\" \"),a(\"p\",[t._v(\"因为炸毛框架是基于 cli 的常驻内存运行方式，你可以将文件、数据库、需要频繁读写的变量读到内存中使用，并设置定时保存以防丢失。\")]),t._v(\" \"),a(\"p\",[t._v(\"框架提供了一个 \"),a(\"code\",[t._v(\"ZMBuf\")]),t._v(\" 类，此类管理了框架所有保存到内存中的全局变量，在模块中你可以调用以下方法进行操作。\")]),t._v(\" \"),a(\"p\",[a(\"code\",[t._v(\"ZMBuf\")]),t._v(\" 类的命名空间在：\"),a(\"code\",[t._v(\"Framework\\\\ZMBuf\")]),t._v(\"，使用前需先 use 或 IDE 写代码时自动生成。\")]),t._v(\" \"),a(\"h3\",{attrs:{id:\"zmbuf-get\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#zmbuf-get\"}},[t._v(\"#\")]),t._v(\" ZMBuf::get()\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"用途：获取一个变量。\")]),t._v(\" \"),a(\"li\",[t._v(\"参数：\"),a(\"code\",[t._v(\"$name\")]),t._v(\"，变量名称。\")]),t._v(\" \"),a(\"li\",[t._v(\"返回：\"),a(\"code\",[t._v(\"mixed\")]),t._v(\"，取决于你 set 的数据。当变量不存在时，返回 \"),a(\"code\",[t._v(\"null\")]),t._v(\"。\")])]),t._v(\" \"),a(\"h3\",{attrs:{id:\"zmbuf-set\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#zmbuf-set\"}},[t._v(\"#\")]),t._v(\" ZMBuf::set()\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"用途：设置一个变量。\")]),t._v(\" \"),a(\"li\",[t._v(\"参数：\"),a(\"code\",[t._v(\"$name\")]),t._v(\"，\"),a(\"code\",[t._v(\"$value\")]),t._v(\"。\")]),t._v(\" \"),a(\"li\",[t._v(\"示例：\"),a(\"code\",[t._v('ZMBuf::set(\"current_time\", date(\"H:i:s\"));')])])]),t._v(\" \"),a(\"h3\",{attrs:{id:\"zmbuf-append\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#zmbuf-append\"}},[t._v(\"#\")]),t._v(\" ZMBuf::append()\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"用途：同 \"),a(\"code\",[t._v(\"set\")]),t._v(\"，效果不同的是，\"),a(\"code\",[t._v(\"$name\")]),t._v(\" 变量名字的缓存为数组，这个方法将数据追加到数组尾部。\")]),t._v(\" \"),a(\"li\",[t._v(\"参数：\"),a(\"code\",[t._v(\"$name\")]),t._v(\"，\"),a(\"code\",[t._v(\"$value\")]),t._v(\"。\")])]),t._v(\" \"),a(\"h3\",{attrs:{id:\"zmbuf-unsetcache\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#zmbuf-unsetcache\"}},[t._v(\"#\")]),t._v(\" ZMBuf::unsetCache()\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"用途：删除缓存内容。\")]),t._v(\" \"),a(\"li\",[t._v(\"参数：\"),a(\"code\",[t._v(\"$name\")])])]),t._v(\" \"),a(\"h3\",{attrs:{id:\"zmbuf-globals\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#zmbuf-globals\"}},[t._v(\"#\")]),t._v(\" ZMBuf::globals()\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"用途：获取全局配置文件 \"),a(\"code\",[t._v(\"global.php\")]),t._v(\"。\")]),t._v(\" \"),a(\"li\",[t._v(\"参数：\"),a(\"code\",[t._v(\"$key\")]),t._v(\"，配置文件的属性名。\")]),t._v(\" \"),a(\"li\",[t._v(\"示例：\"),a(\"code\",[t._v('ZMBuf::globals(\"sql_config\");')])])]),t._v(\" \"),a(\"h3\",{attrs:{id:\"zmbuf-atomics\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#zmbuf-atomics\"}},[t._v(\"#\")]),t._v(\" ZMBuf::$atomics\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"通途：储存框架启动时初始化的原子计数器\")]),t._v(\" \"),a(\"li\",[t._v(\"类型：数组，键名为计数器名称，键值为计数器对象 \"),a(\"code\",[t._v(\"\\\\Swoole\\\\Atomic\")])])]),t._v(\" \"),a(\"blockquote\",[a(\"p\",[t._v(\"剩余的一些方法在一般用户编写代码过程中用不到，故文档暂时不列出，框架内写了一些简单的注释可供参考。\")])]),t._v(\" \"),a(\"h3\",{attrs:{id:\"自动保存的缓存变量\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#自动保存的缓存变量\"}},[t._v(\"#\")]),t._v(\" 自动保存的缓存变量\")]),t._v(\" \"),a(\"p\",[t._v(\"前面的注解和事件以及模块编写均提到了自动保存的缓存变量，自动保存的缓存变量就是储存到 \"),a(\"code\",[t._v(\"ZMBuf\")]),t._v(\" 的变量，只不过会定时储存到文件，不会因为框架关闭或重启而丢失数据。\")]),t._v(\" \"),a(\"p\",[t._v(\"和普通的 \"),a(\"code\",[t._v(\"ZMBuf::set\")]),t._v(\" 方式设置的缓存变量的区别是，自动保存的变量只会自动保存，调用和修改起来两者是完全一致的。\")]),t._v(\" \"),a(\"p\",[t._v(\"比如，你在前面用注解给模块加载了一个自动保存的缓存变量：\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-php line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-php\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v('/**\\n * @SaveBuffer(\"ipad_list\")\\n */')]),t._v(\"\\n\")])]),t._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),a(\"br\")])]),a(\"p\",[t._v(\"在本模块内，你就可以在任意位置进行 \"),a(\"code\",[t._v('ZMBuf::get(\"ipad_list\")')]),t._v(\" 的值，也可以 \"),a(\"code\",[t._v(\"set\")]),t._v(\" 来改变内部的值。\")]),t._v(\" \"),a(\"p\",[t._v(\"其中，\"),a(\"code\",[t._v(\"buf_name\")]),t._v(\" 等同于上面的缓存变量名称，\"),a(\"code\",[t._v(\"sub_folder\")]),t._v(\" 参数为缓存变量在 \"),a(\"code\",[t._v(\"config/\")]),t._v(\" 目录下的子目录名称。如果不写，则默认在 \"),a(\"code\",[t._v(\"config/\")]),t._v(\" 根目录下创建储存文件。\")]),t._v(\" \"),a(\"h2\",{attrs:{id:\"zmrequest-http-客户端\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#zmrequest-http-客户端\"}},[t._v(\"#\")]),t._v(\" ZMRequest HTTP 客户端\")]),t._v(\" \"),a(\"p\",[t._v(\"框架提供了轻量的 HTTP 请求发起工具类，直接静态调用即可。\")]),t._v(\" \"),a(\"p\",[t._v(\"类位置：\"),a(\"code\",[t._v(\"ZM\\\\Utils\\\\ZMRequest\")])]),t._v(\" \"),a(\"h3\",{attrs:{id:\"zmrequest-get\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#zmrequest-get\"}},[t._v(\"#\")]),t._v(\" ZMRequest::get()\")]),t._v(\" \"),a(\"p\",[t._v(\"使用 Swoole 协程客户端发起一次 GET 请求\")]),t._v(\" \"),a(\"p\",[t._v(\"参数：\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[a(\"code\",[t._v(\"$url\")]),t._v(\"：请求的链接，自动解析端口、HTTPS、DNS等操作（支持 HTTPS 需要在 Swoole 安装时 \"),a(\"code\",[t._v(\"enable openssl support\")]),t._v(\"）\")]),t._v(\" \"),a(\"li\",[a(\"code\",[t._v(\"$headers\")]),t._v(\"：可选参数，\"),a(\"code\",[t._v(\"array\")]),t._v(\" 类型，请求头数组。例如 \"),a(\"code\",[t._v('[\"Content-Type\" => \"text/html\"]')]),t._v(\" 等\")]),t._v(\" \"),a(\"li\",[a(\"code\",[t._v(\"$set\")]),t._v(\"：可选参数，\"),a(\"code\",[t._v(\"array\")]),t._v(\" 类型，请求时 Swoole 的客户端参数，见 \"),a(\"a\",{attrs:{href:\"https://wiki.swoole.com/#/coroutine_client/http_client?id=set\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"Swoole 文档\"),a(\"OutboundLink\")],1)]),t._v(\" \"),a(\"li\",[a(\"code\",[t._v(\"$return_body\")]),t._v(\"：可选参数，\"),a(\"code\",[t._v(\"bool\")]),t._v(\" 类型，默认为 \"),a(\"code\",[t._v(\"FALSE\")]),t._v(\"，如果为 \"),a(\"code\",[t._v(\"TRUE\")]),t._v(\" 则函数返回的是返回的 body 字符串或 \"),a(\"code\",[t._v(\"FALSE\")]),t._v(\" (请求失败时)，如果为 \"),a(\"code\",[t._v(\"FALSE\")]),t._v(\" 返回的是 \"),a(\"code\",[t._v(\"Swoole\\\\Coroutine\\\\Http\\\\Client\")]),t._v(\" 对象。\")])]),t._v(\" \"),a(\"p\",[t._v(\"样例：\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-php line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-php\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t._v(\"$r\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" ZMRequest\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"get\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[t._v('\"http://www.example.com/\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[t._v('\"Content-Type\"')]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\">\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[t._v('\"text/html\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token boolean constant\"}},[t._v(\"true\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"if\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t._v(\"$r\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"!==\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token boolean constant\"}},[t._v(\"false\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"echo\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t._v(\"$r\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token constant\"}},[t._v(\"PHP_EOL\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"else\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"echo\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token double-quoted-string string\"}},[t._v('\"请求出错！\"')]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token constant\"}},[t._v(\"PHP_EOL\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\")])]),t._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),a(\"br\")])]),a(\"h3\",{attrs:{id:\"zmrequest-post\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#zmrequest-post\"}},[t._v(\"#\")]),t._v(\" ZMRequest::post()\")]),t._v(\" \"),a(\"p\",[t._v(\"使用 Swoole 协程客户端发起一次 POST 请求\")]),t._v(\" \"),a(\"p\",[t._v(\"参数：\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[a(\"code\",[t._v(\"$url\")]),t._v(\"：请求的链接，自动解析端口、HTTPS、DNS等操作（支持 HTTPS 需要在 Swoole 安装时 \"),a(\"code\",[t._v(\"enable openssl support\")]),t._v(\"）\")]),t._v(\" \"),a(\"li\",[a(\"code\",[t._v(\"$headers\")]),t._v(\"：\"),a(\"code\",[t._v(\"array\")]),t._v(\" 类型，请求头数组。例如 \"),a(\"code\",[t._v('[\"Content-Type\" => \"text/html\"]')]),t._v(\" 等\")]),t._v(\" \"),a(\"li\",[a(\"code\",[t._v(\"$data\")]),t._v(\"：\"),a(\"code\",[t._v(\"mixed\")]),t._v(\" 类型，POST的数据本体\")]),t._v(\" \"),a(\"li\",[a(\"code\",[t._v(\"$set\")]),t._v(\"：可选参数，\"),a(\"code\",[t._v(\"array\")]),t._v(\" 类型，请求时 Swoole 的客户端参数，见 \"),a(\"a\",{attrs:{href:\"https://wiki.swoole.com/#/coroutine_client/http_client?id=set\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"Swoole 文档\"),a(\"OutboundLink\")],1)]),t._v(\" \"),a(\"li\",[a(\"code\",[t._v(\"$return_body\")]),t._v(\"：可选参数，\"),a(\"code\",[t._v(\"bool\")]),t._v(\" 类型，默认为 \"),a(\"code\",[t._v(\"FALSE\")]),t._v(\"，如果为 \"),a(\"code\",[t._v(\"TRUE\")]),t._v(\" 则函数返回的是返回的 body 字符串或 \"),a(\"code\",[t._v(\"FALSE\")]),t._v(\" (请求失败时)，如果为 \"),a(\"code\",[t._v(\"FALSE\")]),t._v(\" 返回的是 \"),a(\"code\",[t._v(\"Swoole\\\\Coroutine\\\\Http\\\\Client\")]),t._v(\" 对象。\")])]),t._v(\" \"),a(\"div\",{staticClass:\"custom-block tip\"},[a(\"p\",{staticClass:\"custom-block-title\"},[t._v(\"提示\")]),t._v(\" \"),a(\"p\",[a(\"code\",[t._v(\"$data\")]),t._v(\" 数据本体如果传入的是数组，则底层会自动打包为 \"),a(\"code\",[t._v(\"x-www-form-urlencoded\")]),t._v(\" 格式的内容，并设置 \"),a(\"code\",[t._v(\"Content-Type\")]),t._v(\" 为 \"),a(\"code\",[t._v(\"application/x-www-form-urlencoded\")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);","extractedComments":[]}